"use strict";(self.webpackChunkmatic_docs=self.webpackChunkmatic_docs||[]).push([[39241],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(n),h=r,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||a;return n?o.createElement(m,s(s({ref:t},p),{},{components:n})):o.createElement(m,s({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var c=2;c<a;c++)s[c]=n[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},15545:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return u}});var o=n(87462),r=n(63366),a=(n(67294),n(3905)),s=["components"],i={id:"supernets-txpool",title:"Transaction Pool",sidebar_label:"Transaction Pool",description:"The transaction pool of Supernets.",keywords:["docs","polygon","edge","architecture","modular","layer","libp2p","extensible"]},l=void 0,c={unversionedId:"supernets/design/supernets-txpool",id:"supernets/design/supernets-txpool",title:"Transaction Pool",description:"The transaction pool of Supernets.",source:"@site/docs/supernets/design/txpool.md",sourceDirName:"supernets/design",slug:"/supernets/design/supernets-txpool",permalink:"/matic-docs/docs/supernets/design/supernets-txpool",draft:!1,editUrl:"https://github.com/maticnetwork/matic-docs/tree/master/docs/supernets/design/txpool.md",tags:[],version:"current",lastUpdatedBy:"k-batista",lastUpdatedAt:1686625626,formattedLastUpdatedAt:"Jun 13, 2023",frontMatter:{id:"supernets-txpool",title:"Transaction Pool",sidebar_label:"Transaction Pool",description:"The transaction pool of Supernets.",keywords:["docs","polygon","edge","architecture","modular","layer","libp2p","extensible"]},sidebar:"supernets",previous:{title:"Memory Pool",permalink:"/matic-docs/docs/supernets/design/supernets-mempool"},next:{title:"Transaction Relayer",permalink:"/matic-docs/docs/supernets/design/supernets-txrelayer"}},p={},u=[{value:"What is the TxPool used for?",id:"what-is-the-txpool-used-for",level:2},{value:"TxPool in Supernets",id:"txpool-in-supernets",level:2}],d={toc:u};function h(e){var t=e.components,n=(0,r.Z)(e,s);return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This documents provides an overview on how the txpool works in Supernets."),(0,a.kt)("h2",{id:"what-is-the-txpool-used-for"},"What is the TxPool used for?"),(0,a.kt)("p",null,"The TxPool module manages the incoming transactions for processing. It maintains a list of unprocessed transactions and ensures they conform to specific constraints before entering the pool."),(0,a.kt)("h2",{id:"txpool-in-supernets"},"TxPool in Supernets"),(0,a.kt)("p",null,"The TxPool has several methods to handle incoming transactions."),(0,a.kt)("details",null,(0,a.kt)("summary",null," Details on how the TxPool works "),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"addTx()")," method is the main entry point for all new transactions. It validates the incoming transaction and adds it to the pool. If the call is successful, an account is created for this address (only once), and an ",(0,a.kt)("inlineCode",{parentName:"p"},"enqueueRequest")," is signaled."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"handleEnqueueRequest()")," method attempts to enqueue the transaction in the given request to the associated account. If the account is eligible for promotion, a ",(0,a.kt)("inlineCode",{parentName:"p"},"promoteRequest")," is signaled afterward. The ",(0,a.kt)("inlineCode",{parentName:"p"},"handlePromoteRequest()")," method moves promotable transactions of some accounts from enqueued to promoted. It can only be invoked by ",(0,a.kt)("inlineCode",{parentName:"p"},"handleEnqueueRequest()")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"resetAccount()"),"."),(0,a.kt)("p",null,"The TxPool also has a ",(0,a.kt)("inlineCode",{parentName:"p"},"validateTx()")," method that checks specific constraints before entering the pool. These constraints include checking the transaction size to overcome DOS Attacks, ensuring the transaction has a strictly positive value, and checking if the transaction is appropriately signed."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"resetAccounts()")," method also updates existing accounts with the new nonce and prunes stale transactions. This ensures that the pool only contains relevant and valid transactions. The ",(0,a.kt)("inlineCode",{parentName:"p"},"updateAccountSkipsCounts()")," method updates the accounts' skips, which is the number of consecutive blocks that do not have the account's transactions."),(0,a.kt)("p",null,"The TxPool implementation in Polygon Supernets uses several data structures to manage transactions efficiently. The ",(0,a.kt)("inlineCode",{parentName:"p"},"accounts")," data structure stores all the accounts and transactions in the pool. The ",(0,a.kt)("inlineCode",{parentName:"p"},"index")," data structure maintains a list of all transactions in the pool, and the ",(0,a.kt)("inlineCode",{parentName:"p"},"gauge")," data structure keeps track of the number of slots used in the pool."),(0,a.kt)("p",null,"Finally, the TxPool implementation in Polygon Supernets handles transactions gossiped by the network through the ",(0,a.kt)("inlineCode",{parentName:"p"},"addGossipTx()")," method. It verifies that the gossiped transaction message is not empty, decodes the transaction, and adds it to the pool using the ",(0,a.kt)("inlineCode",{parentName:"p"},"addTx()")," method.")))}h.isMDXComponent=!0}}]);