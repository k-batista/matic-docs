"use strict";(self.webpackChunkmatic_docs=self.webpackChunkmatic_docs||[]).push([[76388],{3905:function(e,t,a){a.d(t,{Zo:function(){return h},kt:function(){return p}});var o=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=o.createContext({}),d=function(e){var t=o.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},h=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),u=d(a),p=n,m=u["".concat(s,".").concat(p)]||u[p]||c[p]||i;return a?o.createElement(m,r(r({ref:t},h),{},{components:a})):o.createElement(m,r({ref:t},h))}));function p(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,r=new Array(i);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,r[1]=l;for(var d=2;d<i;d++)r[d]=a[d];return o.createElement.apply(null,r)}return o.createElement.apply(null,a)}u.displayName="MDXCreateElement"},33697:function(e,t,a){a.r(t),a.d(t,{assets:function(){return h},contentTitle:function(){return s},default:function(){return p},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return c}});var o=a(87462),n=a(63366),i=(a(67294),a(3905)),r=["components"],l={id:"validator-faq",title:"Node FAQ",description:"Common questions on validator operations",keywords:["docs","matic","polygon","validator","faq"],image:"https://wiki.polygon.technology/img/polygon-logo.png"},s=void 0,d={unversionedId:"faq/validator-faq",id:"faq/validator-faq",title:"Node FAQ",description:"Common questions on validator operations",source:"@site/docs/faq/validator-faq.md",sourceDirName:"faq",slug:"/faq/validator-faq",permalink:"/matic-docs/docs/faq/validator-faq",draft:!1,editUrl:"https://github.com/maticnetwork/matic-docs/tree/master/docs/faq/validator-faq.md",tags:[],version:"current",lastUpdatedBy:"Kennedy Batista",lastUpdatedAt:1686621530,formattedLastUpdatedAt:"Jun 13, 2023",frontMatter:{id:"validator-faq",title:"Node FAQ",description:"Common questions on validator operations",keywords:["docs","matic","polygon","validator","faq"],image:"https://wiki.polygon.technology/img/polygon-logo.png"},sidebar:"faq",previous:{title:"Polygon Multisigs",permalink:"/matic-docs/docs/faq/commit-chain-multisigs"},next:{title:"Staking FAQ",permalink:"/matic-docs/docs/faq/staking-faq"}},h={},c=[{value:"How can I reserve a Validator spot?",id:"how-can-i-reserve-a-validator-spot",level:2},{value:"What are the different states a Validator can be in?",id:"what-are-the-different-states-a-validator-can-be-in",level:2},{value:"Is there a minimum amount of MATIC required to stake to become a validator?",id:"is-there-a-minimum-amount-of-matic-required-to-stake-to-become-a-validator",level:2},{value:"How can a new Validator replace an existing one?",id:"how-can-a-new-validator-replace-an-existing-one",level:2},{value:"Heimdall shows &quot;Failed Sanity Checks&quot;",id:"heimdall-shows-failed-sanity-checks",level:2},{value:"Heimdall and Bor logs are fine and even my bridge is running correctly but my node is not signing any checkpoints",id:"heimdall-and-bor-logs-are-fine-and-even-my-bridge-is-running-correctly-but-my-node-is-not-signing-any-checkpoints",level:2},{value:"Can I start Bor before Heimdall is completely synced?",id:"can-i-start-bor-before-heimdall-is-completely-synced",level:2},{value:"Validator Heimdall is unable to connect to peers",id:"validator-heimdall-is-unable-to-connect-to-peers",level:2},{value:"Heimdall shows &quot;pong timeout&quot;",id:"heimdall-shows-pong-timeout",level:2},{value:"Heimdall shows &quot;Error: Wrong Block.Header.AppHash. Expected xxxx&quot;",id:"heimdall-shows-error-wrong-blockheaderapphash-expected-xxxx",level:2},{value:"Reset Heimdall",id:"reset-heimdall",level:3},{value:"Sync Heimdall from Snapshot",id:"sync-heimdall-from-snapshot",level:3},{value:"Heimdall shows &quot;dpkg: error processing archive&quot;",id:"heimdall-shows-dpkg-error-processing-archive",level:2},{value:"It is not clear which private Key I should add when I generate a validator key",id:"it-is-not-clear-which-private-key-i-should-add-when-i-generate-a-validator-key",level:2},{value:"Is there a way to know if Heimdall is synced?",id:"is-there-a-way-to-know-if-heimdall-is-synced",level:2},{value:"Where can I find Heimdall account info location?",id:"where-can-i-find-heimdall-account-info-location",level:2},{value:"Which file do I add the persistent_peers?",id:"which-file-do-i-add-the-persistent_peers",level:2},{value:"Heimdall shows \u201cDid you reset Tendermint without resetting your application&#39;s data?\u201d",id:"heimdall-shows-did-you-reset-tendermint-without-resetting-your-applications-data",level:2},{value:"Heimdall shows a Panic error",id:"heimdall-shows-a-panic-error",level:2},{value:"Are the private keys the same for Heimdall and Bor keystore?",id:"are-the-private-keys-the-same-for-heimdall-and-bor-keystore",level:2},{value:"Error: (Heimdall) Please repair the WAL file before restarting module=consensus",id:"error-heimdall-please-repair-the-wal-file-before-restarting-moduleconsensus",level:2},{value:"Bor shows &#39;Looking for peers&#39; and cannot find peers",id:"bor-shows-looking-for-peers-and-cannot-find-peers",level:2},{value:"Sentry Bor shows &#39;Looking for peers&#39; and cannot find peers",id:"sentry-bor-shows-looking-for-peers-and-cannot-find-peers",level:2},{value:"Bor shows &quot;Failed to prepare header mining at block 0&quot;",id:"bor-shows-failed-to-prepare-header-mining-at-block-0",level:2},{value:"Bor shows &quot;30303 or invalid command: /home/ubuntu/.bor/password.txt&quot;",id:"bor-shows-30303-or-invalid-command-homeubuntuborpasswordtxt",level:2},{value:"Bor shows &quot;Impossible reorg, please file an issue&quot;",id:"bor-shows-impossible-reorg-please-file-an-issue",level:2},{value:"Bor shows &quot;Failed to prepare mining for header&quot;",id:"bor-shows-failed-to-prepare-mining-for-header",level:2},{value:"Bor shows &quot;Address is required as argument&quot;",id:"bor-shows-address-is-required-as-argument",level:2},{value:"Bor shows &quot;Failed to unlock account (0x...) No key for given address or file&quot;",id:"bor-shows-failed-to-unlock-account-0x-no-key-for-given-address-or-file",level:2},{value:"How to connect to a Web Socket?",id:"how-to-connect-to-a-web-socket",level:2},{value:"Node is not signing any checkpoints",id:"node-is-not-signing-any-checkpoints",level:2},{value:"How to set up a validator node on the mainnet?",id:"how-to-set-up-a-validator-node-on-the-mainnet",level:2},{value:"How to set up a non-validating node?",id:"how-to-set-up-a-non-validating-node",level:2},{value:"Why do I have to keep ETH in my signer account?",id:"why-do-i-have-to-keep-eth-in-my-signer-account",level:2},{value:"Setting up a node with Ansible errors out with &quot;Host not found&quot;",id:"setting-up-a-node-with-ansible-errors-out-with-host-not-found",level:2},{value:"As a validator do I need to run both a sentry and a validator node?",id:"as-a-validator-do-i-need-to-run-both-a-sentry-and-a-validator-node",level:2},{value:"What is the minimum disk space required to run a Validator node?",id:"what-is-the-minimum-disk-space-required-to-run-a-validator-node",level:2},{value:"Bridge shows &quot;Error while fetching mainchain receipt error=&quot;",id:"bridge-shows-error-while-fetching-mainchain-receipt-error",level:2},{value:"Validator Bor is stuck on a block for a long time",id:"validator-bor-is-stuck-on-a-block-for-a-long-time",level:2},{value:"Can I run multiple sentries for a validator?",id:"can-i-run-multiple-sentries-for-a-validator",level:2},{value:"Can I run multiple validators using the same signer key?",id:"can-i-run-multiple-validators-using-the-same-signer-key",level:2},{value:"Is there a way to run a light Bor node?",id:"is-there-a-way-to-run-a-light-bor-node",level:2},{value:"What is the uptime percentage calculation on the staking dashboard?",id:"what-is-the-uptime-percentage-calculation-on-the-staking-dashboard",level:2},{value:"What ports are to be kept open on the sentry node?",id:"what-ports-are-to-be-kept-open-on-the-sentry-node",level:2},{value:"What is the command to check the latest block height on Heimdall?",id:"what-is-the-command-to-check-the-latest-block-height-on-heimdall",level:2},{value:"What is the command to check the latest block height on Bor?",id:"what-is-the-command-to-check-the-latest-block-height-on-bor",level:2},{value:"Standard upgrade commands for Heimdall",id:"standard-upgrade-commands-for-heimdall",level:2},{value:"Standard upgrade commands for Bor",id:"standard-upgrade-commands-for-bor",level:2},{value:"How do I delete remnants of Heimdall and Bor?",id:"how-do-i-delete-remnants-of-heimdall-and-bor",level:2},{value:"Bridge shows &quot;Object &quot;start&quot; is unknown&quot;",id:"bridge-shows-object-start-is-unknown",level:2},{value:"Error: Unable to unmarshall config Error 1 error(s) decoding",id:"error-unable-to-unmarshall-config-error-1-errors-decoding",level:2},{value:"To stop Heimdall and Bor services",id:"to-stop-heimdall-and-bor-services",level:2},{value:"To remove Heimdall and Bor directories",id:"to-remove-heimdall-and-bor-directories",level:2},{value:"List of common commands",id:"list-of-common-commands",level:2},{value:"Where to find Heimdall genesis file",id:"where-to-find-heimdall-genesis-file",level:3},{value:"Where to find <code>heimdall-config.toml</code>",id:"where-to-find-heimdall-configtoml",level:3},{value:"Where to find <code>config.toml</code>",id:"where-to-find-configtoml",level:3},{value:"<code>Where to find heimdall-seeds.txt</code>",id:"where-to-find-heimdall-seedstxt",level:3},{value:"Start Heimdall",id:"start-heimdall",level:3},{value:"Start Heimdall rest-server",id:"start-heimdall-rest-server",level:3},{value:"Start Heimdall bridge-server",id:"start-heimdall-bridge-server",level:3},{value:"Heimdall logs",id:"heimdall-logs",level:3},{value:"Where to find Bor genesis file",id:"where-to-find-bor-genesis-file",level:3},{value:"Start Bor",id:"start-bor",level:3},{value:"Check Heimdall logs",id:"check-heimdall-logs",level:3},{value:"Check Heimdall rest-server",id:"check-heimdall-rest-server",level:3},{value:"Check Heimdall bridge logs",id:"check-heimdall-bridge-logs",level:3},{value:"Check Bor logs",id:"check-bor-logs",level:3},{value:"Kill Bor process",id:"kill-bor-process",level:3},{value:"Diagnosing what went wrong in a node",id:"diagnosing-what-went-wrong-in-a-node",level:3},{value:"How to Troubleshoot Your Node Mining More Zero Blocks",id:"how-to-troubleshoot-your-node-mining-more-zero-blocks",level:2},{value:"How to Address a Significant Block Reorg",id:"how-to-address-a-significant-block-reorg",level:2},{value:"Using Public IP Addresses for <code>persistent_peers</code> and <code>trusted_nodes</code> Configuration",id:"using-public-ip-addresses-for-persistent_peers-and-trusted_nodes-configuration",level:2},{value:"How to Troubleshoot Sidechain Ghost-State Attack",id:"how-to-troubleshoot-sidechain-ghost-state-attack",level:2},{value:"How to Resolve Sync Issues for a Falling-Behind Validator",id:"how-to-resolve-sync-issues-for-a-falling-behind-validator",level:2},{value:"How to Troubleshoot Errors with Heimdall Bridge Tasks",id:"how-to-troubleshoot-errors-with-heimdall-bridge-tasks",level:2}],u={toc:c};function p(e){var t=e.components,a=(0,n.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"how-can-i-reserve-a-validator-spot"},"How can I reserve a Validator spot?"),(0,i.kt)("p",null,"We currently manage validator evaluation through communications / interview before we onboard a validator into the Polygon network. We are also working on building an automated application and admission process, inclusive of questionnaire, scoring logic, and ranking to streamline the application process."),(0,i.kt)("p",null,"Once complete, this process of validator admission will be passed to the community for approval via governance, and subsequently implemented if agreed upon."),(0,i.kt)("h2",{id:"what-are-the-different-states-a-validator-can-be-in"},"What are the different states a Validator can be in?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Active"),": Validator is in the current validator set, produces blocks at the Bor layer, participates in Heimdall consensus and commits checkpoint transactions to the Ethereum mainnet."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Notice"),": Validator sends a transaction to unbond. Before entering into the unbonding period, validator needs to be in active state creating, signing and proposing blocks for a certain time."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Unbonding"),": Validator is inactive in this state and thus earns no reward.")),(0,i.kt)("h2",{id:"is-there-a-minimum-amount-of-matic-required-to-stake-to-become-a-validator"},"Is there a minimum amount of MATIC required to stake to become a validator?"),(0,i.kt)("p",null,"The minimum is 1 MATIC. We had earlier mentioned that we are thinking of having a minimum self stake requirement from the validators, as we do hope that validators also have their skin in the game."),(0,i.kt)("p",null,"However, since we will be moving to a robust replacement strategy as the number of validator slots are limited as of now, this does not need any minimum self stake requirement. It is however, logical that over time, the average / median stake by a validator will tend upwards and become substantial."),(0,i.kt)("h2",{id:"how-can-a-new-validator-replace-an-existing-one"},"How can a new Validator replace an existing one?"),(0,i.kt)("p",null,"There is limited space for accepting new validators. New validators can only join the active set when a currently active validator unbonds."),(0,i.kt)("p",null,"A new auction process for validator replacement will be rolled out."),(0,i.kt)("h2",{id:"heimdall-shows-failed-sanity-checks"},'Heimdall shows "Failed Sanity Checks"'),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Addressbook")," warnings can be ignored without an issue most of the time. If your node is connected to sufficient number of peers, these kind of errors can be ignored. Your ",(0,i.kt)("inlineCode",{parentName:"p"},"pex")," is just trying to re-establish its connections with peers already present in ",(0,i.kt)("inlineCode",{parentName:"p"},"addrbook.json"),"."),(0,i.kt)("h2",{id:"heimdall-and-bor-logs-are-fine-and-even-my-bridge-is-running-correctly-but-my-node-is-not-signing-any-checkpoints"},"Heimdall and Bor logs are fine and even my bridge is running correctly but my node is not signing any checkpoints"),(0,i.kt)("p",null,"This could happen if you have missed adding the ",(0,i.kt)("inlineCode",{parentName:"p"},"ETH_RPC_URL")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"heimdall-config.toml")," file. Please check if you have added it. If not, ensure that you add the correct URL and then restart your Heimdall service."),(0,i.kt)("h2",{id:"can-i-start-bor-before-heimdall-is-completely-synced"},"Can I start Bor before Heimdall is completely synced?"),(0,i.kt)("p",null,"No, you cannot. If you start your Bor without Heimdall being completely synced, you face issues on your Bor."),(0,i.kt)("h2",{id:"validator-heimdall-is-unable-to-connect-to-peers"},"Validator Heimdall is unable to connect to peers"),(0,i.kt)("p",null,"This typically means that your sentry Heimdall is running into issues. Check your sentry Heimdall and see if the service is running fine. If the service is stopped, then restarting the service on your sentry should resolve this issue. Similarly, after fixing your sentry, a restart of your Heimdall service should also resolve the problem."),(0,i.kt)("h2",{id:"heimdall-shows-pong-timeout"},'Heimdall shows "pong timeout"'),(0,i.kt)("p",null,"Full error:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'E[2021-03-01|13:19:12.252] Connection failed @ sendRoutinemodule=p2ppeer=3d1f71344c2d3262eac724c22f8266d9b3e41925@3.217.49.94:26656 conn=MConn{3.217.49.94:26656} err="pong timeout"\n')),(0,i.kt)("p",null,"Usually restarting the Heimdall service should resolve the problem."),(0,i.kt)("h2",{id:"heimdall-shows-error-wrong-blockheaderapphash-expected-xxxx"},'Heimdall shows "Error: Wrong Block.Header.AppHash. Expected xxxx"'),(0,i.kt)("p",null,"This error usually occurs when Heimdall service is stuck on a block and there is no rewind option available on Heimdall."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution:"),"\nTo resolve this:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Reset Heimdall completely"),(0,i.kt)("li",{parentName:"ul"},"Sync from the snapshot again")),(0,i.kt)("h3",{id:"reset-heimdall"},"Reset Heimdall"),(0,i.kt)("p",null,"Reset Heimdall with the following commands:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"sudo service heimdalld stop\nheimdalld unsafe-reset-all\n")),(0,i.kt)("h3",{id:"sync-heimdall-from-snapshot"},"Sync Heimdall from Snapshot"),(0,i.kt)("p",null,"This is how you sync Heimdall from a Snapshot:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"wget -c <Snapshot URL>\ntar -xzvf <snapshot file> -C <HEIMDALL_DATA_DIRECTORY>\n")),(0,i.kt)("p",null,"Then start Heimdall services again. Refer to:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/matic-docs/docs/maintain/validate/run-validator-ansible"},"Run a Validator Node with Ansible")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/matic-docs/docs/maintain/validate/run-validator-binaries"},"Run a Validator Node from Binaries"))),(0,i.kt)("h2",{id:"heimdall-shows-dpkg-error-processing-archive"},'Heimdall shows "dpkg: error processing archive"'),(0,i.kt)("p",null,"Full error:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"dpkg: error processing archive matic-heimdall_1.0.0_amd64.deb (--install): trying to overwrite '/heimdalld-rest-server.service', which is also in package matic-node 1.0.0\n")),(0,i.kt)("p",null,"This occurs mainly because of a previous installation of Polygon on your machine. To resolve you can run: ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo dpkg -r matic-node")),(0,i.kt)("h2",{id:"it-is-not-clear-which-private-key-i-should-add-when-i-generate-a-validator-key"},"It is not clear which private Key I should add when I generate a validator key"),(0,i.kt)("p",null,"The private key to be used is your wallet's ETH address where your Polygon tokens are stored."),(0,i.kt)("h2",{id:"is-there-a-way-to-know-if-heimdall-is-synced"},"Is there a way to know if Heimdall is synced?"),(0,i.kt)("p",null,"You can run the following command to check it:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"curl http://localhost:26657/status\n")),(0,i.kt)("p",null,"Check the value of ",(0,i.kt)("inlineCode",{parentName:"p"},"catching_up"),". If it is ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", then the node is all synced up."),(0,i.kt)("h2",{id:"where-can-i-find-heimdall-account-info-location"},"Where can I find Heimdall account info location?"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"/var/lib/heimdall/config")),(0,i.kt)("h2",{id:"which-file-do-i-add-the-persistent_peers"},"Which file do I add the persistent_peers?"),(0,i.kt)("p",null,"You can add the persistent_peers to ",(0,i.kt)("inlineCode",{parentName:"p"},"/var/lib/heimdall/config/config.toml"),"."),(0,i.kt)("h2",{id:"heimdall-shows-did-you-reset-tendermint-without-resetting-your-applications-data"},"Heimdall shows \u201cDid you reset Tendermint without resetting your application's data?\u201d"),(0,i.kt)("p",null,"Reset the Heimdall config data and try running the installation again:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"heimdalld unsafe-reset-all\nrm -rf $HEIMDALLDIR/bridge\n")),(0,i.kt)("h2",{id:"heimdall-shows-a-panic-error"},"Heimdall shows a Panic error"),(0,i.kt)("p",null,"Full error:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"panic: Unknown db_backend leveldb, expected either goleveldb or memdb or fsdb\n")),(0,i.kt)("p",null,"Change the config to ",(0,i.kt)("inlineCode",{parentName:"p"},"goleveldb")," in ",(0,i.kt)("inlineCode",{parentName:"p"},"config.toml"),"."),(0,i.kt)("h2",{id:"are-the-private-keys-the-same-for-heimdall-and-bor-keystore"},"Are the private keys the same for Heimdall and Bor keystore?"),(0,i.kt)("p",null,"Yes, the private key used for generating the validator keys and Bor keystore are the same. The private key used in this instance is your wallet's ETH address where your Polygon tokens are stored."),(0,i.kt)("h2",{id:"error-heimdall-please-repair-the-wal-file-before-restarting-moduleconsensus"},"Error: (Heimdall) Please repair the WAL file before restarting module=consensus"),(0,i.kt)("p",null,"This issue happens when the WAL file is corrupted."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Solution:")),(0,i.kt)("p",null,"Run the following commands:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"WALFILE=~/.heimdalld/data/cs.wal/wal\ncp $WALFILE ${WALFILE}.bak\ngit clone https://github.com/maticnetwork/tendermint.git\ncd tendermint\ngo run scripts/wal2json/main.go $WALFILE > wal.json\nrm $WALFILE\ngo run scripts/json2wal/main.go wal.json $WALFILE\n")),(0,i.kt)("h2",{id:"bor-shows-looking-for-peers-and-cannot-find-peers"},"Bor shows 'Looking for peers' and cannot find peers"),(0,i.kt)("p",null,"This could happen when Bor has lost connectivity with other peers. In the case of the validator, this occurs when the connectivity with the sentry has failed."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open the file ",(0,i.kt)("inlineCode",{parentName:"p"},"~/var/lib/bor/config.toml")," on your Sentry node.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add the Trusted nodes, Static Nodes, and"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'[Node.P2P]\n\nTrustedNodes = ["enode://<enode_id_of_validator_node>"]\n\n[Node.P2P]\nBootNodes= ["enode://static_node_enode1@ip:port", "enode://static_node_enode2@ip:port", ... ]\n\nStaticNodes = ["enode://static_node_enode1@ip:port", "enode://static_node_enode2@ip:port", ... ]\n\nTrustedNodes = ["enode://<enode_id_of_validator_node>"]\n')),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Now restart Bor: ",(0,i.kt)("inlineCode",{parentName:"li"},"sudo service bor restart"))),(0,i.kt)("p",null,"Follow the same steps on your validator node and instead of ",(0,i.kt)("inlineCode",{parentName:"p"},"enode_id_of_validator_node"),", you need to provide the ",(0,i.kt)("inlineCode",{parentName:"p"},"enode_id_of_sentry_node")," in TrustedNodes."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Bootnodes & Static Nodes ",(0,i.kt)("strong",{parentName:"p"},"can use the same values, are not required on the validator and apply only for sentry and full nodes."))),(0,i.kt)("h2",{id:"sentry-bor-shows-looking-for-peers-and-cannot-find-peers"},"Sentry Bor shows 'Looking for peers' and cannot find peers"),(0,i.kt)("p",null,"This could happen when Bor has lost connectivity with other peers. Generally checking the ",(0,i.kt)("inlineCode",{parentName:"p"},"~/node/bor/start.sh")," file should show you your bootnodes. Check if the bootnodes are entered correctly without any formatting issues. If you have made any changes to the file, then please restart your Bor service and check if the issue is resolved."),(0,i.kt)("p",null,"If the issue persists, contact support team on ",(0,i.kt)("a",{parentName:"p",href:"https://discord.com/invite/0xPolygon"},"Discord"),"."),(0,i.kt)("h2",{id:"bor-shows-failed-to-prepare-header-mining-at-block-0"},'Bor shows "Failed to prepare header mining at block 0"'),(0,i.kt)("p",null,"This happens because of a formatting issue in your ",(0,i.kt)("inlineCode",{parentName:"p"},"/var/lib/bor/data/bor/static-nodes.json")," file. Ensure there are no space and no additional characters like < / > . If you have made any changes to the file then please restart your Bor service and you should see logs printing."),(0,i.kt)("h2",{id:"bor-shows-30303-or-invalid-command-homeubuntuborpasswordtxt"},'Bor shows "30303 or invalid command: /home/ubuntu/.bor/password.txt"'),(0,i.kt)("p",null,"This is because you have not created the Bor keystore and the password file for it. Ensure that you follow all the steps from the guide setup."),(0,i.kt)("h2",{id:"bor-shows-impossible-reorg-please-file-an-issue"},'Bor shows "Impossible reorg, please file an issue"'),(0,i.kt)("p",null,"Let these logs be. Your node should ideally not suffer because of this and the issue should be automatically resolved."),(0,i.kt)("p",null,"If your node is suffering because of this, please contact the support team on ",(0,i.kt)("a",{parentName:"p",href:"https://discord.com/invite/0xPolygon"},"Discord"),"."),(0,i.kt)("h2",{id:"bor-shows-failed-to-prepare-mining-for-header"},'Bor shows "Failed to prepare mining for header"'),(0,i.kt)("p",null,"This message is not an error. The message indicates that the Bor node is not the one creating blocks right now."),(0,i.kt)("h2",{id:"bor-shows-address-is-required-as-argument"},'Bor shows "Address is required as argument"'),(0,i.kt)("p",null,"This means that you have not added your ",(0,i.kt)("a",{parentName:"p",href:"/matic-docs/docs/maintain/glossary#signer-address"},"signer address")," to the metadata. You can add it using this path ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/matic/metadata")," . Once the address is added, you can then restart the Bor service and everything should be fine."),(0,i.kt)("h2",{id:"bor-shows-failed-to-unlock-account-0x-no-key-for-given-address-or-file"},'Bor shows "Failed to unlock account (0x...) No key for given address or file"'),(0,i.kt)("p",null,"This error occurs because the path for the ",(0,i.kt)("inlineCode",{parentName:"p"},"password.txt")," file is incorrect."),(0,i.kt)("p",null,"To fix:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Copy the Bor keystore file to ",(0,i.kt)("inlineCode",{parentName:"li"},"/etc/bor/dataDir/keystore")),(0,i.kt)("li",{parentName:"ol"},"Copy the ",(0,i.kt)("inlineCode",{parentName:"li"},"password.txt")," file to ",(0,i.kt)("inlineCode",{parentName:"li"},"/etc/bor/dataDir/")),(0,i.kt)("li",{parentName:"ol"},"Make sure you have added the correct address in ",(0,i.kt)("inlineCode",{parentName:"li"},"/etc/bor/metadata"))),(0,i.kt)("p",null,"For binaries:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Copy the Bor keystore file to ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/bor/keystore/")),(0,i.kt)("li",{parentName:"ol"},"Copy ",(0,i.kt)("inlineCode",{parentName:"li"},"password.txt")," file to ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/bor/password.txt"))),(0,i.kt)("h2",{id:"how-to-connect-to-a-web-socket"},"How to connect to a Web Socket?"),(0,i.kt)("p",null,"Your /var/lib/bor/config.toml should have settings like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'[jsonrpc]\nipcpath = "/var/lib/bor/bor.ipc"\n# ipcdisable = false\n# gascap = 50000000\n# txfeecap = 5.0\n[jsonrpc.http]\n    enabled = true\n    port = 8545\n    host = "0.0.0.0"\n    api = ["eth", "net", "web3", "txpool", "bor"]\n    vhosts = ["*"]\n    corsdomain = ["*"]\n    # prefix = ""\n[jsonrpc.ws]\n    enabled = true\n    port = 8546\n    # prefix = ""\n    host = "0.0.0.0"\n    api = ["eth", "net", "web3", "txpool", "bor", "net"]\n    origins = ["*"]\n')),(0,i.kt)("p",null,"And then restart Bor for the changes to reflect."),(0,i.kt)("h2",{id:"node-is-not-signing-any-checkpoints"},"Node is not signing any checkpoints"),(0,i.kt)("p",null,"Your node not signing checkpoints could be for multiple reasons:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Check if your Heimdall service is running correctly on your sentry and validator nodes. If the service has stopped abruptly or you see any errors, try restarting your Heimdall service and see it comes back to normal. If the issue persists, contact support team on ",(0,i.kt)("a",{parentName:"li",href:"https://discord.com/invite/0xPolygon"},"Discord"),"."),(0,i.kt)("li",{parentName:"ol"},"Check your Bor service and see if it has halted abruptly or there are any errors on the logs. Try restarting your Bor service to resolve this issue. If the issue persists, contact support team on ",(0,i.kt)("a",{parentName:"li",href:"https://discord.com/invite/0xPolygon"},"Discord"),"."),(0,i.kt)("li",{parentName:"ol"},"Check if your Heimdall Bridge is running or not or if it has any errors in the logs. Try restarting the service and see if the issue resolves. If the issue persists, contact support team on ",(0,i.kt)("a",{parentName:"li",href:"https://discord.com/invite/0xPolygon"},"Discord"),".")),(0,i.kt)("p",null,"If none of this is the issue, contact support team on ",(0,i.kt)("a",{parentName:"p",href:"https://discord.com/invite/0xPolygon"},"Discord"),"."),(0,i.kt)("h2",{id:"how-to-set-up-a-validator-node-on-the-mainnet"},"How to set up a validator node on the mainnet?"),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/matic-docs/docs/maintain/validate/validator-index"},"Getting Started"),"."),(0,i.kt)("h2",{id:"how-to-set-up-a-non-validating-node"},"How to set up a non-validating node?"),(0,i.kt)("p",null,"Check out:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/matic-docs/docs/maintain/validate/run-validator-ansible"},"Run a Validator Node with Ansible")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/matic-docs/docs/maintain/validate/run-validator-binaries"},"Run a Validator Node from Binaries"))),(0,i.kt)("h2",{id:"why-do-i-have-to-keep-eth-in-my-signer-account"},"Why do I have to keep ETH in my signer account?"),(0,i.kt)("p",null,"ETH is required on your ",(0,i.kt)("a",{parentName:"p",href:"/matic-docs/docs/maintain/glossary#signer-address"},"signer account")," because for submitting checkpoints to Ethereum, all transactions require ETH to be used as gas. Hence ETH is required on your signer account."),(0,i.kt)("h2",{id:"setting-up-a-node-with-ansible-errors-out-with-host-not-found"},'Setting up a node with Ansible errors out with "Host not found"'),(0,i.kt)("p",null,"This could be because your ",(0,i.kt)("inlineCode",{parentName:"p"},"inventory.yml")," file may have some formatting issues. Correct them with proper indentation and then try again."),(0,i.kt)("h2",{id:"as-a-validator-do-i-need-to-run-both-a-sentry-and-a-validator-node"},"As a validator do I need to run both a sentry and a validator node?"),(0,i.kt)("p",null,"Yes, you have to run both a sentry and a validator node."),(0,i.kt)("p",null,"The Polygon ecosystem and architecture demands that you run a sentry + validator setup to ensure that your validator node is not exposed to the public and only your sentry node is."),(0,i.kt)("p",null,"Your sentry node gleans information / blocks from the network and then relays them to the validator for validation."),(0,i.kt)("h2",{id:"what-is-the-minimum-disk-space-required-to-run-a-validator-node"},"What is the minimum disk space required to run a Validator node?"),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/matic-docs/docs/maintain/validate/validator-node-system-requirements"},"Validator Node System Requirements"),"."),(0,i.kt)("h2",{id:"bridge-shows-error-while-fetching-mainchain-receipt-error"},'Bridge shows "Error while fetching mainchain receipt error="'),(0,i.kt)("p",null,"These are normal logs. Do not do anything to your bridge. Let it run as it is."),(0,i.kt)("h2",{id:"validator-bor-is-stuck-on-a-block-for-a-long-time"},"Validator Bor is stuck on a block for a long time"),(0,i.kt)("p",null,"This means that your Bor on your sentry is also stuck because your validator gets information from your sentry."),(0,i.kt)("p",null,"Please check your Bor logs on your sentry and see if everything is okay."),(0,i.kt)("p",null,"Restart the Bor service one on your Bor and then simultaneously restart your Bor service on your validator as well."),(0,i.kt)("h2",{id:"can-i-run-multiple-sentries-for-a-validator"},"Can I run multiple sentries for a validator?"),(0,i.kt)("p",null,"Yes, you can."),(0,i.kt)("h2",{id:"can-i-run-multiple-validators-using-the-same-signer-key"},"Can I run multiple validators using the same signer key?"),(0,i.kt)("p",null,"No. You cannot. Polygon's architecture currently does not allow validators running multiple validator nodes using the same signer key."),(0,i.kt)("h2",{id:"is-there-a-way-to-run-a-light-bor-node"},"Is there a way to run a light Bor node?"),(0,i.kt)("p",null,"There is no light node option as of now."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/matic-docs/docs/operate/full-node-binaries"},"Run a Full Node on a binary")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/matic-docs/docs/operate/full-node-deployment"},"Run a Full Node with Ansible"))),(0,i.kt)("h2",{id:"what-is-the-uptime-percentage-calculation-on-the-staking-dashboard"},"What is the uptime percentage calculation on the staking dashboard?"),(0,i.kt)("p",null,"It is calculated as per the last 200 checkpoints submitted to the ones you have actually signed."),(0,i.kt)("h2",{id:"what-ports-are-to-be-kept-open-on-the-sentry-node"},"What ports are to be kept open on the sentry node?"),(0,i.kt)("p",null,"You will need to make sure that you open ports 22, 26656 and 30303 to world (0.0.0.0/0) on sentry node firewall."),(0,i.kt)("h2",{id:"what-is-the-command-to-check-the-latest-block-height-on-heimdall"},"What is the command to check the latest block height on Heimdall?"),(0,i.kt)("p",null,"You can run this command ",(0,i.kt)("inlineCode",{parentName:"p"},"curl localhost:26657/status"),"."),(0,i.kt)("h2",{id:"what-is-the-command-to-check-the-latest-block-height-on-bor"},"What is the command to check the latest block height on Bor?"),(0,i.kt)("p",null,"Run the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'curl  http://<your ip>:8545 -X POST -H "Content-Type: application/json" -d \'\n  {"jsonrpc":"2.0", "id":1, "method":"bor_getSigners", "params":["0x98b3ea"]}\n\'\n')),(0,i.kt)("h2",{id:"standard-upgrade-commands-for-heimdall"},"Standard upgrade commands for Heimdall"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cd ~/heimdall\ngit pull\ngit checkout <branch tag>\nmake install\nsudo service heimdalld restart\n")),(0,i.kt)("p",null,"The latest version, ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/maticnetwork/heimdall/releases/tag/v0.3.3"},"Heimdall v.0.3.3"),", contains a few enhancements such as:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Restricting data size in state sync txs to:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"30Kb")," when represented in ",(0,i.kt)("strong",{parentName:"li"},"bytes")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"60Kb")," when represented as ",(0,i.kt)("strong",{parentName:"li"},"string"),"."))),(0,i.kt)("li",{parentName:"ol"},"Increasing the ",(0,i.kt)("strong",{parentName:"li"},"delay time")," between the contract events of different validators to ensure that the mempool doesn't get filled very quickly in case of a burst of events which can hamper the progress of the chain.")),(0,i.kt)("p",null,"The following example shows how the data size is restricted:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'Data - "abcd1234"\nLength in string format - 8\nHex Byte representation - [171 205 18 52]\nLength in byte format - 4\n')),(0,i.kt)("h2",{id:"standard-upgrade-commands-for-bor"},"Standard upgrade commands for Bor"),(0,i.kt)("p",null,"These are the commands to upgrade Bor:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cd ~/bor\ngit pull\ngit checkout <branch tag>\nsudo service bor stop\nmake bor-all\nsudo service bor start\n")),(0,i.kt)("h2",{id:"how-do-i-delete-remnants-of-heimdall-and-bor"},"How do I delete remnants of Heimdall and Bor?"),(0,i.kt)("p",null,"If you want to delete the remnants of Heimdall and Bor, you can run the following commands:"),(0,i.kt)("p",null,"Bor:"),(0,i.kt)("p",null,"For Linux package:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"sudo dpkg -i matic-bor\n")),(0,i.kt)("p",null,"And delete Bor directory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"sudo rm -rf /etc/bor\n")),(0,i.kt)("p",null,"For Binaries:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"sudo rm -rf /etc/bor\n")),(0,i.kt)("p",null,"And:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"sudo rm /etc/heimdall\n")),(0,i.kt)("h2",{id:"bridge-shows-object-start-is-unknown"},'Bridge shows "Object "start" is unknown"'),(0,i.kt)("p",null,"Check ",(0,i.kt)("inlineCode",{parentName:"p"},"which bridge")," \u2014 if it's ",(0,i.kt)("inlineCode",{parentName:"p"},"/usr/sbin/bridge"),', you are not running the right "bridge" program.'),(0,i.kt)("p",null,"Try ",(0,i.kt)("inlineCode",{parentName:"p"},"~/go/bin/bridge")," instead (or ",(0,i.kt)("inlineCode",{parentName:"p"},"$GOBIN/bridge)"),"."),(0,i.kt)("h2",{id:"error-unable-to-unmarshall-config-error-1-errors-decoding"},"Error: Unable to unmarshall config Error 1 error(s) decoding"),(0,i.kt)("p",null,"Full error:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"'' has invalid keys: clerk_polling_interval, matic_token, span_polling_interval, stake_manager_contract, stakinginfo_contract\n")),(0,i.kt)("p",null,"This occurs mostly because there are typos, some missing parts or an old config file which is still a remnant. You will need to clear all the remnants and then try setting it up again."),(0,i.kt)("h2",{id:"to-stop-heimdall-and-bor-services"},"To stop Heimdall and Bor services"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For Linux packages"),":"),(0,i.kt)("p",null,"Stop Heimdall: ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo service heimdalld stop")),(0,i.kt)("p",null,"Stop Bor: ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo service bor stop"),", or"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"ps -aux | grep bor"),". Get the PID for Bor and then run the following command."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo kill -9 PID"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For Binaries"),":"),(0,i.kt)("p",null,"Stop Heimdall: ",(0,i.kt)("inlineCode",{parentName:"p"},"pkill heimdalld")),(0,i.kt)("p",null,"Stop Bridge: ",(0,i.kt)("inlineCode",{parentName:"p"},"pkill heimdalld-bridge")),(0,i.kt)("p",null,"Stop Bor: Go to CS-2001/bor and then run, ",(0,i.kt)("inlineCode",{parentName:"p"},"bash stop.sh")),(0,i.kt)("h2",{id:"to-remove-heimdall-and-bor-directories"},"To remove Heimdall and Bor directories"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For Linux packages"),":"),(0,i.kt)("p",null,"Delete Heimdall: ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo rm -rf /etc/heimdall/*")),(0,i.kt)("p",null,"Delete Bor: ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo rm -rf /etc/bor/*")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For Binaries"),":"),(0,i.kt)("p",null,"Delete Heimdall: ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo rm -rf /var/lib/heimdall/")),(0,i.kt)("p",null,"Delete Bor: ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo rm -rf /var/lib/bor")),(0,i.kt)("h2",{id:"list-of-common-commands"},"List of common commands"),(0,i.kt)("h3",{id:"where-to-find-heimdall-genesis-file"},"Where to find Heimdall genesis file"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$CONFIGPATH/heimdall/config/genesis.json")),(0,i.kt)("h3",{id:"where-to-find-heimdall-configtoml"},"Where to find ",(0,i.kt)("inlineCode",{parentName:"h3"},"heimdall-config.toml")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"/etc/heimdall/config/heimdall-config.toml")),(0,i.kt)("h3",{id:"where-to-find-configtoml"},"Where to find ",(0,i.kt)("inlineCode",{parentName:"h3"},"config.toml")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"/etc/heimdall/config/config.toml")),(0,i.kt)("h3",{id:"where-to-find-heimdall-seedstxt"},(0,i.kt)("inlineCode",{parentName:"h3"},"Where to find heimdall-seeds.txt")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$CONFIGPATH/heimdall/heimdall-seeds.txt")),(0,i.kt)("h3",{id:"start-heimdall"},"Start Heimdall"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ sudo service heimdalld start")),(0,i.kt)("h3",{id:"start-heimdall-rest-server"},"Start Heimdall rest-server"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ sudo service heimdalld-rest-server start")),(0,i.kt)("h3",{id:"start-heimdall-bridge-server"},"Start Heimdall bridge-server"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$ sudo service heimdalld-bridge start")),(0,i.kt)("h3",{id:"heimdall-logs"},"Heimdall logs"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"/var/log/matic-logs/")),(0,i.kt)("h3",{id:"where-to-find-bor-genesis-file"},"Where to find Bor genesis file"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"$CONFIGPATH/bor/genesis.json")),(0,i.kt)("h3",{id:"start-bor"},"Start Bor"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"sudo service bor start")),(0,i.kt)("h3",{id:"check-heimdall-logs"},"Check Heimdall logs"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"tail -f heimdalld.log")),(0,i.kt)("h3",{id:"check-heimdall-rest-server"},"Check Heimdall rest-server"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"tail -f heimdalld-rest-server.log")),(0,i.kt)("h3",{id:"check-heimdall-bridge-logs"},"Check Heimdall bridge logs"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"tail -f heimdalld-bridge.log")),(0,i.kt)("h3",{id:"check-bor-logs"},"Check Bor logs"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"tail -f bor.log")),(0,i.kt)("h3",{id:"kill-bor-process"},"Kill Bor process"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For Linux")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"ps -aux | grep bor"),". Get the PID for Bor and then run the following command."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"sudo kill -9 PID"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"For binaries")),(0,i.kt)("p",null,"Go to ",(0,i.kt)("inlineCode",{parentName:"p"},"CS-2003/bor")," and then run, ",(0,i.kt)("inlineCode",{parentName:"p"},"bash stop.sh")),(0,i.kt)("h3",{id:"diagnosing-what-went-wrong-in-a-node"},"Diagnosing what went wrong in a node"),(0,i.kt)("p",null,"You can use ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/maticnetwork/launch/tree/master/scripts/node_diagnostics.sh"},"this script")," to check periodially the sync status of your node."),(0,i.kt)("h2",{id:"how-to-troubleshoot-your-node-mining-more-zero-blocks"},"How to Troubleshoot Your Node Mining More Zero Blocks"),(0,i.kt)("p",null,"If your node is mining more zero blocks, it's recommended to compare the size of the chaindata directory on both the sentry and validator. If the sizes are not matching, you should clear the chaindata directory that is less in size, and we recommend syncing from a fresh snapshot again."),(0,i.kt)("p",null,"Steps to clear chaindata:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Run the command ",(0,i.kt)("inlineCode",{parentName:"li"},"rm -r /var/lib/bor/data/bor/chaindata"),". This command removes the chaindata directory and all its contents recursively. This step is necessary to clear any corrupted data that might be causing issues with your node."),(0,i.kt)("li",{parentName:"ol"},"Then, run ",(0,i.kt)("inlineCode",{parentName:"li"},"mkdir /var/lib/bor/data/bor/chaindata"),". This command creates a new, empty chaindata directory, which will be populated with the latest block data when you start syncing your node again. This step is necessary to ensure that your node has a clean slate to work with, and it won't face any issues caused by previous corrupted data.")),(0,i.kt)("p",null,"To sync from a snapshot, please follow the instructions provided ",(0,i.kt)("a",{parentName:"p",href:"https://wiki.polygon.technology/docs/operate/snapshot-instructions-heimdall-bor/"},(0,i.kt)("ins",null,"here"))),(0,i.kt)("h2",{id:"how-to-address-a-significant-block-reorg"},"How to Address a Significant Block Reorg"),(0,i.kt)("p",null,"If your node has suffered a significant reorg, we recommend that you connect with the Polygon Team and share the logs. Our team is continuously working on improving the network's finality in the long term."),(0,i.kt)("h2",{id:"using-public-ip-addresses-for-persistent_peers-and-trusted_nodes-configuration"},"Using Public IP Addresses for ",(0,i.kt)("inlineCode",{parentName:"h2"},"persistent_peers")," and ",(0,i.kt)("inlineCode",{parentName:"h2"},"trusted_nodes")," Configuration"),(0,i.kt)("p",null,"When configuring the ",(0,i.kt)("inlineCode",{parentName:"p"},"persistent_peers")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"trusted_nodes")," settings, we recommend using public IP addresses. This ensures that your node is connected to the correct public network and can communicate with other nodes effectively. Using private IP addresses can result in connectivity issues, as these addresses are not accessible outside your private network."),(0,i.kt)("h2",{id:"how-to-troubleshoot-sidechain-ghost-state-attack"},"How to Troubleshoot Sidechain Ghost-State Attack"),(0,i.kt)("p",null,"If your node displays the error message \"Sidechain ghost-state attack detected number=17483813 sideroot='19a361...'\", it's likely due to the node importing a batch of blocks for which the state has been pruned, but encounters a block for which the state is present and aborts the process to prevent importing those blocks without verifying the state. This can also occur during large reorgs."),(0,i.kt)("p",null,"To address this issue, try rewinding to 100 blocks from the current block number and then roll back the node by a few hundred blocks before resyncing from the previous blocks. To do this, you will need to convert the block number to hexadecimal using a tool for converting decimals to hexadecimal."),(0,i.kt)("p",null,"Once you have the hexadecimal number, run the following commands:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"bor attach ./.bor/data/bor.ipc")),(0,i.kt)("li",{parentName:"ol"},"`",(0,i.kt)("inlineCode",{parentName:"li"},'> debug.setHead("0xE92570")'))),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"debug.setHead()")," function will allow your Bor to set the tip at a particular block height. The output for this should be null, which means the command was successful. You can now start monitoring your logs for Bor again and see if it passes that block number. If the provided solutions don't work, please contact the Polygon Support team immediately."),(0,i.kt)("h2",{id:"how-to-resolve-sync-issues-for-a-falling-behind-validator"},"How to Resolve Sync Issues for a Falling-Behind Validator"),(0,i.kt)("p",null,"If your validator is falling behind the latest blocks and is currently syncing, follow these steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open port ",(0,i.kt)("inlineCode",{parentName:"p"},"8545")," on the sentry.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In the heimdall-config.toml file of the validator, replace it with http://ip:8545.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Check that the sentry RPC has the http API enabled in config.toml.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The validator must have the address of ",(0,i.kt)("inlineCode",{parentName:"p"},"0.0.0.0")," and only listen to and from the validator."),(0,i.kt)("blockquote",{parentName:"li"},(0,i.kt)("p",{parentName:"blockquote"},"Once the node has caught up with the latest blocks, please revert all the changes to the defaults.")))),(0,i.kt)("p",null,"If the sentry has also fallen behind the latest blocks, follow these additional steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Open the heimdall-config.toml file on the validator.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Change the value of the ",(0,i.kt)("inlineCode",{parentName:"p"},"bor_rpc_url")," parameter to any one of the public endpoints listed ",(0,i.kt)("a",{parentName:"p",href:"https://wiki.polygon.technology/"},(0,i.kt)("ins",null,"here")),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Restart the services."),(0,i.kt)("blockquote",{parentName:"li"},(0,i.kt)("p",{parentName:"blockquote"},"Once the node has caught up with the latest blocks, please revert all the changes to the defaults.")))),(0,i.kt)("h2",{id:"how-to-troubleshoot-errors-with-heimdall-bridge-tasks"},"How to Troubleshoot Errors with Heimdall Bridge Tasks"),(0,i.kt)("p",null,"If you receive an error message similar to the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'[0;94mINFO: 2023/02/24 09:25:12 amqp.go:326 Task not registered with this worker. Requeing message: {"UUID":"task_5c2d8983-89fa-42c1-a491-bacb682572b0","Name":"sendStakeUpdateToHeimdall","RoutingKey":"machinery_task","ETA":"2023-02-24T07:25:04.0895409Z","GroupUUID":"","GroupTaskCount":0,"Args":[{"Name":"","Type":"string","Value":"StakeUpdate"},{"Name":"","Type":"string","Value":"{\\"address\\":\\"0xa59c847bd5ac0172ff4fe912c5d29e5a71a7512b\\",\\"topics\\":[\\"0x35af9eea1f0e7b300b0a14fae90139a072470e44daa3f14b5069bebbc1265bda\\",\\"0x0000000000000000000000000000000000000000000000000000000000000004\\",\\"0x0000000000000000000000000000000000000000000000000000000000000abd\\",\\"0x000000000000000000000000000000000000000000010693d2f1c350b752c130\\"],\\"data\\":\\"0x\\",\\"blockNumber\\":\\"0xfda81f\\",\\"transactionHash\\":\\"0xaa551dd79e0086aeee18e3e41207d2f0d9b3d1a8a09d885c794e7ba5939b410e\\",\\"transactionIndex\\":\\"0x65\\",\\"blockHash\\":\\"0x06ef6aad4402835be2d99968a26ac8e3d07a8f16351fba6c6c3f6808ead828d7\\",\\"logIndex\\":\\"0xe1\\",\\"removed\\":false}"}],"Headers":{},"Priority":0,"Immutable":false,"RetryCount":2,"RetryTimeout":1,"OnSuccess":null,"OnError":null,"ChordCallback":null,"BrokerMessageGroupId":"","SQSReceiptHandle":"","StopTaskDeletionOnError":false,"IgnoreWhenTaskNotRegistered":false}[0m\n')),(0,i.kt)("p",null,"It generally indicates that the Heimdall bridge is not properly up and running. Usually, the issue gets resolved in some time. However, if the problem persists, restarting the node can help resolve it."))}p.isMDXComponent=!0}}]);