"use strict";(self.webpackChunkmatic_docs=self.webpackChunkmatic_docs||[]).push([[21872],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),k=d(n),u=r,h=k["".concat(s,".").concat(u)]||k[u]||c[u]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=k;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=n[d];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},69011:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return c}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=["components"],l={id:"supernets-how-to-stake",title:"How to Stake on the Rootchain",sidebar_label:"How to Stake on the Rootchain",description:"Learn how to stake on the rootchain.",keywords:["docs","polygon","supernets","stake","staking","MATIC","rootchain"]},s=void 0,d={unversionedId:"supernets/operate/deploy/staking/supernets-how-to-stake",id:"supernets/operate/deploy/staking/supernets-how-to-stake",title:"How to Stake on the Rootchain",description:"Learn how to stake on the rootchain.",source:"@site/docs/supernets/operate/deploy/staking/stake.md",sourceDirName:"supernets/operate/deploy/staking",slug:"/supernets/operate/deploy/staking/supernets-how-to-stake",permalink:"/matic-docs/docs/supernets/operate/deploy/staking/supernets-how-to-stake",draft:!1,editUrl:"https://github.com/maticnetwork/matic-docs/tree/master/docs/supernets/operate/deploy/staking/stake.md",tags:[],version:"current",lastUpdatedBy:"Kennedy Batista",lastUpdatedAt:1686621530,formattedLastUpdatedAt:"Jun 13, 2023",frontMatter:{id:"supernets-how-to-stake",title:"How to Stake on the Rootchain",sidebar_label:"How to Stake on the Rootchain",description:"Learn how to stake on the rootchain.",keywords:["docs","polygon","supernets","stake","staking","MATIC","rootchain"]},sidebar:"supernets",previous:{title:"Staking on the Rootchain",permalink:"/matic-docs/docs/category/staking-on-the-rootchain"},next:{title:"How to Unstake on the Rootchain",permalink:"/matic-docs/docs/supernets/operate/deploy/staking/supernets-unstake"}},p={},c=[{value:"i. Initial staking on the rootchain",id:"i-initial-staking-on-the-rootchain",level:2},{value:"ii. Finalize validator set on the rootchain",id:"ii-finalize-validator-set-on-the-rootchain",level:2}],k={toc:c};function u(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"In this section, we'll walkthrough how to stake test MATIC on the associated rootchain."),(0,o.kt)("h2",{id:"i-initial-staking-on-the-rootchain"},"i. Initial staking on the rootchain"),(0,o.kt)("p",null,"Each validator needs to perform initial staking on the rootchain ",(0,o.kt)("inlineCode",{parentName:"p"},"StakeManager")," contract. This is done using the ",(0,o.kt)("inlineCode",{parentName:"p"},"polygon-edge polybft stake")," command. ",(0,o.kt)("strong",{parentName:"p"},"Note that this command is for testing purposes only.")),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Flags \u2193"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Flag"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"),(0,o.kt)("th",{parentName:"tr",align:null},"Example"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--amount ")),(0,o.kt)("td",{parentName:"tr",align:null},"The amount to stake"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--amount 5000000000000000000"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--chain-id")),(0,o.kt)("td",{parentName:"tr",align:null},"The ID of the child chain"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--chain-id 100"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--config ")),(0,o.kt)("td",{parentName:"tr",align:null},"The path to the SecretsManager config file"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--config /path/to/config/file.yaml"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--data-dir")),(0,o.kt)("td",{parentName:"tr",align:null},"The directory for the Polygon Edge data"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--data-dir ./polygon-edge/data"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--jsonrpc")),(0,o.kt)("td",{parentName:"tr",align:null},"The JSON-RPC interface"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--jsonrpc 0.0.0.0:8545"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--native-root-token ")),(0,o.kt)("td",{parentName:"tr",align:null},"The address of the native root token"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--native-root-token 0x<token_address>"))),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--stake-manager")),(0,o.kt)("td",{parentName:"tr",align:null},"The address of the stake manager contract"),(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"--stake-manager 0x<manager_address>")))))),(0,o.kt)("p",null,"In the following example command, we use the validator key and the rootchain ",(0,o.kt)("inlineCode",{parentName:"p"},"StakeManager")," contract address that were generated earlier. We also set the staking amount to ",(0,o.kt)("inlineCode",{parentName:"p"},"1000000000000000000")," which is equivalent to 1 token. The ",(0,o.kt)("inlineCode",{parentName:"p"},"--native-root-token")," flag is used to specify the address of the native token of the root chain. In the case of Polygon, this is the MATIC token. You can obtain the address of the MATIC token by checking the network explorer or by querying the network using a tool like curl or web3.js."),(0,o.kt)("details",null,(0,o.kt)("summary",null,"Obtaining native root token address"),(0,o.kt)("p",null,"For example, if you are using the Mumbai test network, you can obtain the address of the MATIC testnet token by sending a GET request to the Mumbai network's JSON-RPC endpoint:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl <mumbai-rpc-endpoint> \\\n-X POST \\\n-H "Content-Type: application/json" \\\n--data \'{"jsonrpc":"2.0","method":"eth_contractAddress","params":["MaticToken"],"id":1}\'\n'))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./polygon-edge polybft stake --data-dir ./test-chain-1 --chain-id 100 --amount 1000000000000000000 \\\n--stake-manager 0x6ceCFe1Db48Ab97fA89b06Df6Bd0bBdE6E64e6F7 --native-root-token 0x559Dd13d8A3CAb3Ff127c408f2A08A8a2AEfC56c\n")),(0,o.kt)("h2",{id:"ii-finalize-validator-set-on-the-rootchain"},"ii. Finalize validator set on the rootchain"),(0,o.kt)("p",null,"After all validators from the genesis block have performed initial staking on the rootchain, the final step required before starting the chain is to finalize the genesis validator set on the ",(0,o.kt)("inlineCode",{parentName:"p"},"SupernetManager")," contract on the rootchain. This can be done using the ",(0,o.kt)("inlineCode",{parentName:"p"},"polygon-edge polybft supernet")," command."),(0,o.kt)("p",null,"The deployer of the ",(0,o.kt)("inlineCode",{parentName:"p"},"SupernetManager")," contract can specify their hex-encoded private key or use the ",(0,o.kt)("inlineCode",{parentName:"p"},"--data-dir")," flag if they have initialized their secrets. If the ",(0,o.kt)("inlineCode",{parentName:"p"},"--enable-staking")," flag is provided, validators will be able to continue staking on the rootchain. If not, genesis validators will not be able to update their stake or unstake, nor will newly registered validators after genesis be able to stake tokens on the rootchain. The enabling of staking can be done through this command or later after the Supernet starts."),(0,o.kt)("p",null,"In the following example command, we use a placeholder hex-encoded private key of the ",(0,o.kt)("inlineCode",{parentName:"p"},"SupernetManager")," contract deployer. The addresses of the ",(0,o.kt)("inlineCode",{parentName:"p"},"SupernetManager")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"StakeManager")," contracts are the addresses that were generated earlier. We also use the ",(0,o.kt)("inlineCode",{parentName:"p"},"--finalize-genesis")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"--enable-staking")," flags to enable staking and finalize the genesis state."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"   ./polygon-edge polybft supernet --private-key 0x0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef \\\n   --genesis /path/to/genesis/file \\\n   --supernet-manager 0x75aA024A2292A3FD3C17d67b54B3d00435437246 \\\n   --stake-manager 0x811068e4106f7A70D443684FF4927eC3940439Ec \\\n   --finalize-genesis --enable-staking\n")))}u.isMDXComponent=!0}}]);