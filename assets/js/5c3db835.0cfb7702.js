"use strict";(self.webpackChunkmatic_docs=self.webpackChunkmatic_docs||[]).push([[3580],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),h=s(n),m=o,d=h["".concat(l,".").concat(m)]||h[m]||u[m]||a;return n?r.createElement(d,i(i({ref:t},p),{},{components:n})):r.createElement(d,i({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=h;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},3898:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return c},metadata:function(){return s},toc:function(){return u}});var r=n(87462),o=n(63366),a=(n(67294),n(3905)),i=["components"],c={id:"checkpoint-manager",title:"CheckpointManager",sidebar_label:"CheckpointManager",description:"Learn about the access control module and how to allowlist validators.",keywords:["docs","polygon","edge","consensus","interface"]},l=void 0,s={unversionedId:"supernets/interfaces/network/checkpoint-manager",id:"supernets/interfaces/network/checkpoint-manager",title:"CheckpointManager",description:"Learn about the access control module and how to allowlist validators.",source:"@site/docs/supernets/interfaces/network/checkpoint-manager.md",sourceDirName:"supernets/interfaces/network",slug:"/supernets/interfaces/network/checkpoint-manager",permalink:"/matic-docs/docs/supernets/interfaces/network/checkpoint-manager",draft:!1,editUrl:"https://github.com/maticnetwork/matic-docs/tree/master/docs/supernets/interfaces/network/checkpoint-manager.md",tags:[],version:"current",lastUpdatedBy:"k-batista",lastUpdatedAt:1686625626,formattedLastUpdatedAt:"Jun 13, 2023",frontMatter:{id:"checkpoint-manager",title:"CheckpointManager",sidebar_label:"CheckpointManager",description:"Learn about the access control module and how to allowlist validators.",keywords:["docs","polygon","edge","consensus","interface"]},sidebar:"supernets",previous:{title:"Network",permalink:"/matic-docs/docs/category/network"},next:{title:"ExitHelper",permalink:"/matic-docs/docs/supernets/interfaces/network/exit-helper"}},p={},u=[{value:"Overview",id:"overview",level:2},{value:"Submit a checkpoint",id:"submit-a-checkpoint",level:2},{value:"Get event membership by block number",id:"get-event-membership-by-block-number",level:2},{value:"Get event membership by epoch",id:"get-event-membership-by-epoch",level:2},{value:"Get checkpoint block number",id:"get-checkpoint-block-number",level:2},{value:"Get event root by block",id:"get-event-root-by-block",level:2}],h={toc:u};function m(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"ICheckpointManager")," interface is a crucial part of the checkpoint system, allowing validators to submit signed checkpoints as proof of the canonical chain. This guide will explain the methods the ICheckpointManager interface provides and how to use them."),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"ICheckpointManager")," interface is responsible for managing checkpoints in the system. It provides methods for submitting checkpoints, verifying event membership by block number or epoch, and retrieving checkpoint information."),(0,a.kt)("h2",{id:"submit-a-checkpoint"},"Submit a checkpoint"),(0,a.kt)("p",null,"To submit a checkpoint, call the submit method:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-solidity"},"function submit(\n    CheckpointMetadata calldata checkpointMetadata,\n    Checkpoint calldata checkpoint,\n    uint256[2] calldata signature,\n    Validator[] calldata newValidatorSet,\n    bytes calldata bitmap\n) external;\n")),(0,a.kt)("p",null,"The parameters for submitting a checkpoint include the following:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The checkpoint metadata."),(0,a.kt)("li",{parentName:"ul"},"The checkpoint itself."),(0,a.kt)("li",{parentName:"ul"},"The aggregated signature."),(0,a.kt)("li",{parentName:"ul"},"The new validator set."),(0,a.kt)("li",{parentName:"ul"},"A bitmap of the old validator set that signed the message."),(0,a.kt)("li",{parentName:"ul"},"The contract will verify the provided signature against the stored validator set.")),(0,a.kt)("h2",{id:"get-event-membership-by-block-number"},"Get event membership by block number"),(0,a.kt)("p",null,"To check if an event is part of the event root for a given block number, call the getEventMembershipByBlockNumber method:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-solidity"},"function getEventMembershipByBlockNumber(\n    uint256 blockNumber,\n    bytes32 leaf,\n    uint256 leafIndex,\n    bytes32[] calldata proof\n) external view returns (bool);\n")),(0,a.kt)("p",null,"This method takes the block number, the leaf of the event (keccak256-encoded log), the leaf index in the Merkle root tree, and the proof for leaf membership in the event root tree. It returns true if the event is part of the event root."),(0,a.kt)("h2",{id:"get-event-membership-by-epoch"},"Get event membership by epoch"),(0,a.kt)("p",null,"To check if an event is part of the event root for a given epoch, call the getEventMembershipByEpoch method:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-solidity"},"function getEventMembershipByEpoch(\n    uint256 epoch,\n    bytes32 leaf,\n    uint256 leafIndex,\n    bytes32[] calldata proof\n) external view returns (bool);\n")),(0,a.kt)("p",null,"This method takes the epoch ID, the leaf of the event (keccak256-encoded log), the leaf index in the Merkle root tree, and the proof for leaf membership in the event root tree. It returns true if the event is part of the event root."),(0,a.kt)("h2",{id:"get-checkpoint-block-number"},"Get checkpoint block number"),(0,a.kt)("p",null,"To get the checkpoint block number for a given block number, call the getCheckpointBlock method:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-solidity"},"function getCheckpointBlock(uint256 blockNumber) external view returns (bool, uint256);\n")),(0,a.kt)("p",null,"This method takes the block number and returns a boolean indicating if the block number was checkpointed, as well as the checkpoint block number."),(0,a.kt)("h2",{id:"get-event-root-by-block"},"Get event root by block"),(0,a.kt)("p",null,"To get the event root for a given block number, call the getEventRootByBlock method:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-solidity"},"function getEventRootByBlock(uint256 blockNumber) external view returns (bytes32);\n")))}m.isMDXComponent=!0}}]);