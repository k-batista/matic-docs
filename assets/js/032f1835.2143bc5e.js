"use strict";(self.webpackChunkmatic_docs=self.webpackChunkmatic_docs||[]).push([[22400],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return u}});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),h=c(a),u=o,m=h["".concat(s,".").concat(u)]||h[u]||d[u]||r;return a?n.createElement(m,l(l({ref:t},p),{},{components:a})):n.createElement(m,l({ref:t},p))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,l=new Array(r);l[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var c=2;c<r;c++)l[c]=a[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},93010:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return d}});var n=a(87462),o=a(63366),r=(a(67294),a(3905)),l=["components"],i={id:"alchemy",title:"Deploy a Smart Contract Using Alchemy",sidebar_label:"Using Alchemy",description:"Guide to deploy smart contracts using Alchemy",keywords:["docs","matic","polygon","alchemy","create smart contract","deploy on polygon"],image:"https://wiki.polygon.technology/img/polygon-logo.png"},s=void 0,c={unversionedId:"develop/alchemy",id:"develop/alchemy",title:"Deploy a Smart Contract Using Alchemy",description:"Guide to deploy smart contracts using Alchemy",source:"@site/docs/develop/alchemy.md",sourceDirName:"develop",slug:"/develop/alchemy",permalink:"/matic-docs/docs/develop/alchemy",draft:!1,editUrl:"https://github.com/maticnetwork/matic-docs/tree/master/docs/develop/alchemy.md",tags:[],version:"current",lastUpdatedBy:"k-batista",lastUpdatedAt:1686625626,formattedLastUpdatedAt:"Jun 13, 2023",frontMatter:{id:"alchemy",title:"Deploy a Smart Contract Using Alchemy",sidebar_label:"Using Alchemy",description:"Guide to deploy smart contracts using Alchemy",keywords:["docs","matic","polygon","alchemy","create smart contract","deploy on polygon"],image:"https://wiki.polygon.technology/img/polygon-logo.png"},sidebar:"develop",previous:{title:"Using thirdweb",permalink:"/matic-docs/docs/develop/thirdweb"},next:{title:"Using QuickNode",permalink:"/matic-docs/docs/develop/quicknode"}},p={},d=[{value:"Overview",id:"overview",level:2},{value:"What you will learn",id:"what-you-will-learn",level:2},{value:"What you will do",id:"what-you-will-do",level:2},{value:"Create and Deploy your Smart Contract",id:"create-and-deploy-your-smart-contract",level:2},{value:"Connect to the Polygon network",id:"connect-to-the-polygon-network",level:3},{value:"Create your App (and API key)",id:"create-your-app-and-api-key",level:3},{value:"Create a Wallet address",id:"create-a-wallet-address",level:3},{value:"Add Polygon Mumbai Test MATIC",id:"add-polygon-mumbai-test-matic",level:3},{value:"Check your Wallet Balance",id:"check-your-wallet-balance",level:3},{value:"Initialize your project",id:"initialize-your-project",level:3},{value:"Download Hardhat",id:"download-hardhat",level:3},{value:"Create Hardhat project",id:"create-hardhat-project",level:3},{value:"Add project folders",id:"add-project-folders",level:3},{value:"Write the contract",id:"write-the-contract",level:3},{value:"Connect with MetaMask &amp; Alchemy",id:"connect-with-metamask--alchemy",level:3},{value:"Install Ethers.js",id:"install-ethersjs",level:3},{value:"Update hardhat.config.js",id:"update-hardhatconfigjs",level:3},{value:"Compile our Smart Contract",id:"compile-our-smart-contract",level:3},{value:"Write our deploy script",id:"write-our-deploy-script",level:3},{value:"Deploy our Smart Contract",id:"deploy-our-smart-contract",level:3},{value:"Verify the Contract",id:"verify-the-contract",level:3},{value:"Additional Resources",id:"additional-resources",level:2}],h={toc:d};function u(e){var t=e.components,i=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,n.Z)({},h,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{title:"Content disclaimer",type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Please view the third-party content disclaimer ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/maticnetwork/matic-docs/blob/master/CONTENT_DISCLAIMER.md"},(0,r.kt)("ins",null,"here")),".")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"This tutorial is for developers who are either new to Ethereum blockchain development or want to understand the fundamentals of deploying and interacting with smart contracts. It will walk you through creating and deploying a smart contract on the Polygon Mumbai test network using a cryptocurrency wallet (",(0,r.kt)("a",{parentName:"p",href:"https://metamask.io"},"Metamask"),"), ",(0,r.kt)("a",{parentName:"p",href:"https://docs.soliditylang.org/en/v0.8.0/"},"Solidity"),", ",(0,r.kt)("a",{parentName:"p",href:"https://hardhat.org"},"Hardhat"),", and ",(0,r.kt)("a",{parentName:"p",href:"https://alchemy.com/?a=polygon-docs"},"Alchemy"),"."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If you have questions or concerns, please reach out to the Alchemy team via their ",(0,r.kt)("a",{parentName:"p",href:"https://discord.gg/gWuC7zB"},(0,r.kt)("ins",null,"official Discord"))," server.")),(0,r.kt)("h2",{id:"what-you-will-learn"},"What you will learn"),(0,r.kt)("p",null,"To create a smart contract in this tutorial, you will learn how to use Alchemy's platform to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a smart contract application"),(0,r.kt)("li",{parentName:"ul"},"Check a wallet's balance"),(0,r.kt)("li",{parentName:"ul"},"Verify contract calls in a blockchain explorer")),(0,r.kt)("h2",{id:"what-you-will-do"},"What you will do"),(0,r.kt)("p",null,"Following the tutorial, you will:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Get started creating an app on Alchemy"),(0,r.kt)("li",{parentName:"ol"},"Create a wallet address with Metamask"),(0,r.kt)("li",{parentName:"ol"},"Add balance to the wallet (using test tokens)"),(0,r.kt)("li",{parentName:"ol"},"Use Hardhat and Ethers.js to compile and deploy the project"),(0,r.kt)("li",{parentName:"ol"},"Check contract status on Alchemy's platform")),(0,r.kt)("h2",{id:"create-and-deploy-your-smart-contract"},"Create and Deploy your Smart Contract"),(0,r.kt)("h3",{id:"connect-to-the-polygon-network"},"Connect to the Polygon network"),(0,r.kt)("p",null,"There are several ways to make requests to the Polygon PoS chain. Rather than running your own node, you will use a free account on Alchemy's developer platform and interact with the Alchemy Polygon PoS API to communicate with the Polygon PoS chain. The platform consists of a full suite of developer tooling \u2013 this includes the ability to monitor requests, data analytics that demonstrates what happens under the hood during smart contract deployment, enhanced APIs (Transact, NFTs, etc), and an ethers.js SDK."),(0,r.kt)("p",null,"If you don\u2019t already have an Alchemy account, start by signing up for a free account ",(0,r.kt)("a",{parentName:"p",href:"https://www.alchemy.com/polygon/?a=polygon-docs"},"here"),". After creating your account, you have the option of immediately creating your first app before reaching the dashboard."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:a(16649).Z,width:"2530",height:"1212"})),(0,r.kt)("h3",{id:"create-your-app-and-api-key"},"Create your App (and API key)"),(0,r.kt)("p",null,"After successfully creating an Alchemy account, you will need to generate an API key by creating an app. This authenticates the requests made to the Polygon Mumbai testnet. If you\u2019re not familiar with testnets, check out ",(0,r.kt)("a",{parentName:"p",href:"https://docs.alchemyapi.io/guides/choosing-a-network"},"this testnet guide"),"."),(0,r.kt)("p",null,"To generate a new API key, navigate to the ",(0,r.kt)("strong",{parentName:"p"},"Apps")," tab on the Alchemy dashboard navigation bar and select the ",(0,r.kt)("strong",{parentName:"p"},"Create App")," sub-tab."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:a(73305).Z,width:"2527",height:"1201"})),(0,r.kt)("p",null,"Name your new app ",(0,r.kt)("strong",{parentName:"p"},"Hello World"),", offer a short description, select ",(0,r.kt)("strong",{parentName:"p"},"Polygon")," for the chain, and choose ",(0,r.kt)("strong",{parentName:"p"},"Polygon Mumbai")," for your network."),(0,r.kt)("p",null,"Finally, click on ",(0,r.kt)("strong",{parentName:"p"},"Create app"),". Your new app should appear in the table below."),(0,r.kt)("h3",{id:"create-a-wallet-address"},"Create a Wallet address"),(0,r.kt)("p",null,"Polygon PoS is a layer 2 scaling solution for Ethereum. Therefore, we need an Ethereum wallet and add a custom Polygon URL to send and receive transactions on the Polygon Mumbai testnet. For this tutorial, we will use MetaMask, a browser-compatible cryptocurrency wallet used to manage your wallet address. If you want to understand more about how transactions on Ethereum work, check out ",(0,r.kt)("a",{parentName:"p",href:"https://ethereum.org/en/developers/docs/transactions/"},"this transactions guide")," by the Ethereum Foundation."),(0,r.kt)("p",null,"To get your custom Polygon RPC URL from Alchemy, go to your ",(0,r.kt)("strong",{parentName:"p"},"Hello World")," app in your Alchemy dashboard and click ",(0,r.kt)("strong",{parentName:"p"},"View Key")," in the top right corner. Then go ahead and copy your Alchemy HTTP API key."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:a(7372).Z,width:"1844",height:"449"})),(0,r.kt)("p",null,"You can download and create a MetaMask account for free ",(0,r.kt)("a",{parentName:"p",href:"https://metamask.io/download.html"},"here"),". Once you've created an account, follow these steps to set up the Polygon PoS network on your wallet."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Select ",(0,r.kt)("strong",{parentName:"p"},"Settings")," from the drop-down menu in the top right corner of your MetaMask wallet.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Select ",(0,r.kt)("strong",{parentName:"p"},"Networks")," from the menu to the left.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Connect your wallet to the Mumbai Testnet using the following parameters:"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Network Name:")," Polygon Mumbai Testnet"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"New RPC URL:")," ",(0,r.kt)("a",{parentName:"p",href:"https://polygon-mumbai.g.alchemy.com/v2/your-api-key"},"https://polygon-mumbai.g.alchemy.com/v2/your-api-key")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"ChainID:")," 80001"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Symbol:")," MATIC"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Block Explorer URL:")," ",(0,r.kt)("a",{parentName:"p",href:"https://mumbai.polygonscan.com/"},"https://mumbai.polygonscan.com/")))),(0,r.kt)("h3",{id:"add-polygon-mumbai-test-matic"},"Add Polygon Mumbai Test MATIC"),(0,r.kt)("p",null,"You'll need a few testnet tokens to deploy your smart contract to the Mumbai testnet. To obtain testnet tokens, go to the ",(0,r.kt)("a",{parentName:"p",href:"https://faucet.polygon.technology/"},"Polygon Mumbai Faucet"),", select ",(0,r.kt)("strong",{parentName:"p"},"Mumbai"),", select ",(0,r.kt)("strong",{parentName:"p"},"MATIC Token"),", and enter your Polygon wallet address, then click ",(0,r.kt)("strong",{parentName:"p"},"Submit"),". Due to network traffic, it may take some time to receive your testnet tokens."),(0,r.kt)("p",null,"You can also use Alchemy's ",(0,r.kt)("a",{parentName:"p",href:"https://mumbaifaucet.com/?a=polygon-docs"},"free Mumbai faucet"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:a(6727).Z,width:"1720",height:"834"})),(0,r.kt)("p",null,"You will see the testnet tokens in your MetaMask account soon after."),(0,r.kt)("h3",{id:"check-your-wallet-balance"},"Check your Wallet Balance"),(0,r.kt)("p",null,"To double-check our balance is there, let\u2019s make an ",(0,r.kt)("a",{parentName:"p",href:"https://docs.alchemy.com/reference/eth-getbalance-polygon"},"eth","_","getBalance")," request using ",(0,r.kt)("a",{parentName:"p",href:"https://composer.alchemyapi.io/"},"Alchemy\u2019s composer tool"),". Select ",(0,r.kt)("strong",{parentName:"p"},"Polygon")," as the chain, ",(0,r.kt)("strong",{parentName:"p"},"Polygon Mumbai")," as the network, ",(0,r.kt)("inlineCode",{parentName:"p"},"eth_getBalance")," as the method, and input your address. This will return the amount of MATIC in our wallet. Check out ",(0,r.kt)("a",{parentName:"p",href:"https://youtu.be/r6sjRxBZJuU"},"this video")," for instructions on how to use the composer tool."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:a(13452).Z,width:"1593",height:"1198"})),(0,r.kt)("p",null,"After you input your MetaMask account address and click ",(0,r.kt)("strong",{parentName:"p"},"Send Request"),", you should see a response that looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ "jsonrpc": "2.0", "id": 0, "result": "0xde0b6b3a7640000" }\n')),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},'This result is in Wei, not ETH. Wei is the smallest denomination of Ether. The conversion from Wei to Ether is: 1 Ether = 10^18 Wei. So, if we convert "0xde0b6b3a7640000" to decimal, we get 1',"*","10^18, which equals 1 ETH. This can be mapped to 1 MATIC based on denomination.")),(0,r.kt)("h3",{id:"initialize-your-project"},"Initialize your project"),(0,r.kt)("p",null,"First, we\u2019ll need to create a folder for our project. Navigate to your ",(0,r.kt)("a",{parentName:"p",href:"https://www.computerhope.com/jargon/c/commandi.htm"},"command line")," and type:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir hello-world\ncd hello-world\n")),(0,r.kt)("p",null,"Now that we\u2019re inside our project folder, we\u2019ll use ",(0,r.kt)("inlineCode",{parentName:"p"},"npm init")," to initialize the project. If you don\u2019t already have npm installed, follow ",(0,r.kt)("a",{parentName:"p",href:"https://docs.alchemyapi.io/alchemy/guides/alchemy-for-macs#1-install-nodejs-and-npm"},"these instructions")," (we\u2019ll also need Node.js so download that too!)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm init # (or npm init --yes)\n")),(0,r.kt)("p",null,"It doesn\u2019t really matter how you answer the installation questions, here is how we did it for reference:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'package name: (hello-world)\nversion: (1.0.0)\ndescription: hello world smart contract\nentry point: (index.js)\ntest command:\ngit repository:\nkeywords:\nauthor:\nlicense: (ISC)\n\nAbout to write to /Users/.../.../.../hello-world/package.json:\n\n{\n   "name": "hello-world",\n   "version": "1.0.0",\n   "description": "hello world smart contract",\n   "main": "index.js",\n   "scripts": {\n      "test": "echo \\"Error: no test specified\\" && exit 1"\n   },\n   "author": "",\n   "license": "ISC"\n}\n')),(0,r.kt)("p",null,"Approve the package.json and we\u2019re good to go!"),(0,r.kt)("h3",{id:"download-hardhat"},"Download ",(0,r.kt)("a",{parentName:"h3",href:"https://hardhat.org/getting-started/#overview"},"Hardhat")),(0,r.kt)("p",null,"Hardhat is a development environment to compile, deploy, test, and debug your Ethereum software. It helps developers when building smart contracts and dApps locally before deploying to the live chain."),(0,r.kt)("p",null,"Inside our ",(0,r.kt)("inlineCode",{parentName:"p"},"hello-world")," project, run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev hardhat\n")),(0,r.kt)("p",null,"Check out this page for more details on ",(0,r.kt)("a",{parentName:"p",href:"https://hardhat.org/getting-started/#overview"},"installation instructions"),"."),(0,r.kt)("h3",{id:"create-hardhat-project"},"Create Hardhat project"),(0,r.kt)("p",null,"Inside our ",(0,r.kt)("inlineCode",{parentName:"p"},"hello-world")," project folder, run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx hardhat\n")),(0,r.kt)("p",null,"You should see a welcome message and option to select what you want to do. Select ",(0,r.kt)("strong",{parentName:"p"},"create an empty hardhat.config.js"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'888    888                      888 888               888\n888    888                      888 888               888\n888    888                      888 888               888\n8888888888  8888b.  888d888 .d88888 88888b.   8888b.  888888\n888    888     "88b 888P"  d88" 888 888 "88b     "88b 888\n888    888 .d888888 888    888  888 888  888 .d888888 888\n888    888 888  888 888    Y88b 888 888  888 888  888 Y88b.\n888    888 "Y888888 888     "Y88888 888  888 "Y888888  "Y888\n\n\ud83d\udc77 Welcome to Hardhat v2.0.11 \ud83d\udc77\u200d\n\nWhat do you want to do? \u2026\nCreate a sample project\n\u276f Create an empty hardhat.config.js\nQuit\n')),(0,r.kt)("p",null,"This will generate a ",(0,r.kt)("inlineCode",{parentName:"p"},"hardhat.config.js")," file for us, which is where we\u2019ll specify all of the set up for our project."),(0,r.kt)("h3",{id:"add-project-folders"},"Add project folders"),(0,r.kt)("p",null,"To keep our project organized, we\u2019ll create two new folders. Navigate to the root directory of your ",(0,r.kt)("inlineCode",{parentName:"p"},"hello-world")," project in your command line and type:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir contracts\nmkdir scripts\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"contracts/")," is where we\u2019ll keep our hello world smart contract code file"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"scripts/")," is where we\u2019ll keep scripts to deploy and interact with our contract")),(0,r.kt)("h3",{id:"write-the-contract"},"Write the contract"),(0,r.kt)("p",null,"Open up the ",(0,r.kt)("strong",{parentName:"p"},"hello-world")," project in your favorite editor, such as ",(0,r.kt)("a",{parentName:"p",href:"https://code.visualstudio.com"},"VSCode"),". Smart contracts are written in a language called Solidity which is what we will use to write our ",(0,r.kt)("inlineCode",{parentName:"p"},"HelloWorld.sol")," smart contract.\u200c"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Navigate to the ",(0,r.kt)("inlineCode",{parentName:"li"},"contracts")," folder and create a new file called ",(0,r.kt)("inlineCode",{parentName:"li"},"HelloWorld.sol")),(0,r.kt)("li",{parentName:"ol"},"Below is a sample Hello World smart contract from the ",(0,r.kt)("a",{parentName:"li",href:"https://ethereum.org/en/"},"Ethereum Foundation")," that we will be using for this tutorial. Copy and paste in the contents below into your ",(0,r.kt)("inlineCode",{parentName:"li"},"HelloWorld.sol")," file, and be sure to read the comments to understand what this contract does:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"// SPDX-License-Identifier: None\n\n// Specifies the version of Solidity, using semantic versioning.\n// Learn more: https://solidity.readthedocs.io/en/v0.5.10/layout-of-source-files.html#pragma\npragma solidity >=0.8.9;\n\n// Defines a contract named `HelloWorld`.\n// A contract is a collection of functions and data (its state). Once deployed, a contract resides at a specific address on the Ethereum blockchain. Learn more: https://solidity.readthedocs.io/en/v0.5.10/structure-of-a-contract.html\ncontract HelloWorld {\n\n   //Emitted when update function is called\n   //Smart contract events are a way for your contract to communicate that something happened on the blockchain to your app front-end, which can be 'listening' for certain events and take action when they happen.\n   event UpdatedMessages(string oldStr, string newStr);\n\n   // Declares a state variable `message` of type `string`.\n   // State variables are variables whose values are permanently stored in contract storage. The keyword `public` makes variables accessible from outside a contract and creates a function that other contracts or clients can call to access the value.\n   string public message;\n\n   // Similar to many class-based object-oriented languages, a constructor is a special function that is only executed upon contract creation.\n   // Constructors are used to initialize the contract's data. Learn more:https://solidity.readthedocs.io/en/v0.5.10/contracts.html#constructors\n   constructor(string memory initMessage) {\n\n      // Accepts a string argument `initMessage` and sets the value into the contract's `message` storage variable).\n      message = initMessage;\n   }\n\n   // A public function that accepts a string argument and updates the `message` storage variable.\n   function update(string memory newMessage) public {\n      string memory oldMsg = message;\n      message = newMessage;\n      emit UpdatedMessages(oldMsg, newMessage);\n   }\n}\n")),(0,r.kt)("p",null,"This is a super simple smart contract that stores a message upon creation and can be updated by calling the ",(0,r.kt)("inlineCode",{parentName:"p"},"update")," function."),(0,r.kt)("h3",{id:"connect-with-metamask--alchemy"},"Connect with MetaMask & Alchemy"),(0,r.kt)("p",null,"We\u2019ve created a MetaMask wallet, Alchemy account, and written our smart contract, now it\u2019s time to connect the three."),(0,r.kt)("p",null,"Every transaction sent from your virtual wallet requires a signature using your unique private key. To provide our program with this permission, we can safely store our private key (and Alchemy API key) in an environment file."),(0,r.kt)("p",null,"First, install the dotenv package in your project directory:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install dotenv --save\n")),(0,r.kt)("p",null,"Then, create a ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file in the root directory of our project, and add your MetaMask private key and HTTP Alchemy API URL to it."),(0,r.kt)("admonition",{title:"Warning",type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Your environment file must be named ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," or it won't be recognized as an environment file. Do not name it ",(0,r.kt)("inlineCode",{parentName:"p"},"process.env")," or ",(0,r.kt)("inlineCode",{parentName:"p"},".env-custom")," or anything else."),(0,r.kt)("p",{parentName:"admonition"},"Also, if you are using a version control system like git to manage your project, please ",(0,r.kt)("strong",{parentName:"p"},"DO NOT")," track the ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," file. Add ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," to your ",(0,r.kt)("inlineCode",{parentName:"p"},".gitignore")," file to avoid publishing secret data.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Follow ",(0,r.kt)("a",{parentName:"li",href:"https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key"},"these instructions")," to export your private key"),(0,r.kt)("li",{parentName:"ul"},"To get your Alchemy HTTP API key (RPC URL), navigate to your ",(0,r.kt)("strong",{parentName:"li"},"Hello World")," app on your account's dashboard and click ",(0,r.kt)("strong",{parentName:"li"},"View Key")," in the top right corner.")),(0,r.kt)("p",null,"Your ",(0,r.kt)("inlineCode",{parentName:"p"},".env")," should look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'API_URL = "https://polygon-mumbai.g.alchemy.com/v2/your-api-key"\nPRIVATE_KEY = "your-metamask-private-key"\n')),(0,r.kt)("p",null,"To actually connect these to our code, we\u2019ll reference these variables in our ",(0,r.kt)("inlineCode",{parentName:"p"},"hardhat.config.js")," file later in this tutorial."),(0,r.kt)("h3",{id:"install-ethersjs"},"Install Ethers.js"),(0,r.kt)("p",null,"Ethers.js is a library that makes it easier to interact and make requests to Ethereum by wrapping ",(0,r.kt)("a",{parentName:"p",href:"https://docs.alchemyapi.io/alchemy/documentation/alchemy-api-reference/json-rpc"},"standard JSON-RPC methods")," with more user-friendly methods."),(0,r.kt)("p",null,"Hardhat makes it easy to integrate ",(0,r.kt)("a",{parentName:"p",href:"https://hardhat.org/plugins/"},"plugins")," for additional tooling and extended functionality. We\u2019ll be taking advantage of the ",(0,r.kt)("a",{parentName:"p",href:"https://hardhat.org/plugins/nomiclabs-hardhat-ethers.html"},"Ethers plugin")," for contract deployment. ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ethers-io/ethers.js/"},"Ethers.js")," has useful contract deployment methods."),(0,r.kt)("p",null,"In your project directory, type:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'npm install --save-dev @nomiclabs/hardhat-ethers "ethers@^5.0.0"\n')),(0,r.kt)("p",null,"We\u2019ll also require ethers in our ",(0,r.kt)("inlineCode",{parentName:"p"},"hardhat.config.js")," in the next step."),(0,r.kt)("h3",{id:"update-hardhatconfigjs"},"Update hardhat.config.js"),(0,r.kt)("p",null,"We\u2019ve added several dependencies and plugins so far. Now we need to update ",(0,r.kt)("inlineCode",{parentName:"p"},"hardhat.config.js")," so that our project recognizes those dependencies."),(0,r.kt)("p",null,"Update your ",(0,r.kt)("inlineCode",{parentName:"p"},"hardhat.config.js")," to look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'/**\n* @type import(\'hardhat/config\').HardhatUserConfig\n*/\n\nrequire(\'dotenv\').config();\nrequire("@nomiclabs/hardhat-ethers");\n\nconst { API_URL, PRIVATE_KEY } = process.env;\n\nmodule.exports = {\n   solidity: "0.8.9",\n   defaultNetwork: "polygon_mumbai",\n   networks: {\n      hardhat: {},\n      polygon_mumbai: {\n         url: API_URL,\n         accounts: [`0x${PRIVATE_KEY}`]\n      }\n   },\n}\n')),(0,r.kt)("h3",{id:"compile-our-smart-contract"},"Compile our Smart Contract"),(0,r.kt)("p",null,"To make sure everything is working so far, let\u2019s compile our contract. The ",(0,r.kt)("inlineCode",{parentName:"p"},"compile")," task is one of the built-in hardhat tasks."),(0,r.kt)("p",null,"From the command line run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx hardhat compile\n")),(0,r.kt)("p",null,"You might get a warning about ",(0,r.kt)("inlineCode",{parentName:"p"},"SPDX license identifier not provided in source file")," , but the application might still be working fine. If not, you can always message in the ",(0,r.kt)("a",{parentName:"p",href:"https://discord.gg/u72VCg3"},"Alchemy discord"),"."),(0,r.kt)("h3",{id:"write-our-deploy-script"},"Write our deploy script"),(0,r.kt)("p",null,"Now that our contract is written and our configuration file is good to go, it\u2019s time to write our contract deploy script."),(0,r.kt)("p",null,"Navigate to the ",(0,r.kt)("inlineCode",{parentName:"p"},"scripts/")," folder and create a new file called ",(0,r.kt)("inlineCode",{parentName:"p"},"deploy.js"),", adding the following contents to it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'async function main() {\n   const HelloWorld = await ethers.getContractFactory("HelloWorld");\n\n   // Start deployment, returning a promise that resolves to a contract object\n   const hello_world = await HelloWorld.deploy("Hello World!");\n   console.log("Contract deployed to address:", hello_world.address);\n}\n\nmain()\n  .then(() => process.exit(0))\n  .catch(error => {\n    console.error(error);\n    process.exit(1);\n  });\n')),(0,r.kt)("p",null,"We\u2019ve adopted the Hardhat team explanations to what each of these lines of code does from their ",(0,r.kt)("a",{parentName:"p",href:"https://hardhat.org/tutorial/testing-contracts.html#writing-tests"},"Contracts tutorial")," here."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'const HelloWorld = await ethers.getContractFactory("HelloWorld");\n')),(0,r.kt)("p",null,"A ",(0,r.kt)("inlineCode",{parentName:"p"},"ContractFactory")," in ethers.js is an abstraction used to deploy new smart contracts, so ",(0,r.kt)("inlineCode",{parentName:"p"},"HelloWorld")," here is a ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Factory_(object-oriented_programming)"},"factory")," for instances of our hello world contract. When using the ",(0,r.kt)("inlineCode",{parentName:"p"},"hardhat-ethers")," plugin ",(0,r.kt)("inlineCode",{parentName:"p"},"ContractFactory")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Contract"),", instances are connected to the first signer (owner) by default."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const hello_world = await HelloWorld.deploy();\n")),(0,r.kt)("p",null,"Calling ",(0,r.kt)("inlineCode",{parentName:"p"},"deploy()")," on a ",(0,r.kt)("inlineCode",{parentName:"p"},"ContractFactory")," will start the deployment, and return a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," that resolves to a ",(0,r.kt)("inlineCode",{parentName:"p"},"Contract")," object. This is the object that has a method for each of our smart contract functions."),(0,r.kt)("h3",{id:"deploy-our-smart-contract"},"Deploy our Smart Contract"),(0,r.kt)("p",null,"Navigate to the command line and run:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npx hardhat run scripts/deploy.js --network polygon_mumbai\n")),(0,r.kt)("p",null,"You should see something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Contract deployed to address: 0x3d94af870ED272Cd5370e4135F9B2Bd0e311d65D\n")),(0,r.kt)("p",null,"If we go to the ",(0,r.kt)("a",{parentName:"p",href:"https://mumbai.polygonscan.com/"},"Polygon Mumbai explorer")," and search for our contract address, we should be able to see that it has been deployed successfully."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"From")," address should match your MetaMask account address and the ",(0,r.kt)("inlineCode",{parentName:"p"},"To")," address will say ",(0,r.kt)("strong",{parentName:"p"},"Contract Creation"),". But if we click into the transaction, we\u2019ll see our contract address in the ",(0,r.kt)("inlineCode",{parentName:"p"},"To")," field."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:a(20267).Z,width:"2101",height:"1144"})),(0,r.kt)("h3",{id:"verify-the-contract"},"Verify the Contract"),(0,r.kt)("p",null,"Alchemy provides an ",(0,r.kt)("a",{parentName:"p",href:"https://dashboard.alchemyapi.io/explorer"},"explorer")," where you can find information about the methods deployed along with the smart contract, such as response time, HTTP status, error codes among others. It is a good environment to verify your contract and check whether the transactions went through."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"img",src:a(32840).Z,width:"1590",height:"1180"})),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Congratulations! You just deployed a smart contract to the Polygon Mumbai network.")),(0,r.kt)("h2",{id:"additional-resources"},"Additional Resources"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.alchemy.com/docs/how-to-develop-an-nft-smart-contract-erc721-with-alchemy"},"How to Develop an NFT Smart Contract")," \u2013 Alchemy has a written tutorial with a Youtube video on this topic. This is week 1 of its free 10 week ",(0,r.kt)("strong",{parentName:"li"},"Road to Web3")," dev series"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.alchemy.com/reference/polygon-api-quickstart"},"Polygon API Quickstart")," \u2013 Alchemy's developer docs guide to getting up and running with Polygon")))}u.isMDXComponent=!0},16649:function(e,t,a){t.Z=a.p+"assets/images/alchemy-dashboard-80e7aa16cfe21b5d1cb85e07f28b0705.png"},32840:function(e,t,a){t.Z=a.p+"assets/images/calls-a39415d7f6d8304e8b38b20b628c3398.png"},73305:function(e,t,a){t.Z=a.p+"assets/images/create-app-8d68280105f1f41d61e27b3f3002da1e.png"},6727:function(e,t,a){t.Z=a.p+"assets/images/faucet-fd576a6362e673619dd5687b9e277b08.png"},13452:function(e,t,a){t.Z=a.p+"assets/images/get-balance-f43437b92e8fea4f7048cce95170695a.png"},20267:function(e,t,a){t.Z=a.p+"assets/images/polygon-scan-6da13e77c756fcda50d8fab9bb907b20.png"},7372:function(e,t,a){t.Z=a.p+"assets/images/view-key-7663cbb0ee4e533e76ee7ede5a838c1b.png"}}]);