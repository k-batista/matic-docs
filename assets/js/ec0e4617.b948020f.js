"use strict";(self.webpackChunkmatic_docs=self.webpackChunkmatic_docs||[]).push([[16684],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(n),m=a,h=u["".concat(c,".").concat(m)]||u[m]||d[m]||i;return n?o.createElement(h,r(r({ref:t},p),{},{components:n})):o.createElement(h,r({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var s=2;s<i;s++)r[s]=n[s];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5925:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return d}});var o=n(87462),a=n(63366),i=(n(67294),n(3905)),r=["components"],l={id:"quicknode",title:"Deploy a Smart Contract Using QuickNode",sidebar_label:"Using QuickNode",description:"Deploy Smart Contracts on Polygon using Brownie and Quicknode.",keywords:["docs","matic","quicknode","polygon","python","web3.py","smart contract","brownie","deploy"],image:"https://wiki.polygon.technology/img/polygon-logo.png"},c=void 0,s={unversionedId:"develop/quicknode",id:"develop/quicknode",title:"Deploy a Smart Contract Using QuickNode",description:"Deploy Smart Contracts on Polygon using Brownie and Quicknode.",source:"@site/docs/develop/quicknode.md",sourceDirName:"develop",slug:"/develop/quicknode",permalink:"/matic-docs/docs/develop/quicknode",draft:!1,editUrl:"https://github.com/maticnetwork/matic-docs/tree/master/docs/develop/quicknode.md",tags:[],version:"current",lastUpdatedBy:"Kennedy Batista",lastUpdatedAt:1686621530,formattedLastUpdatedAt:"Jun 13, 2023",frontMatter:{id:"quicknode",title:"Deploy a Smart Contract Using QuickNode",sidebar_label:"Using QuickNode",description:"Deploy Smart Contracts on Polygon using Brownie and Quicknode.",keywords:["docs","matic","quicknode","polygon","python","web3.py","smart contract","brownie","deploy"],image:"https://wiki.polygon.technology/img/polygon-logo.png"},sidebar:"develop",previous:{title:"Using Alchemy",permalink:"/matic-docs/docs/develop/alchemy"},next:{title:"Using Chainstack",permalink:"/matic-docs/docs/develop/chainstack"}},p={},d=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"What you will do",id:"what-you-will-do",level:2},{value:"What is Brownie?",id:"what-is-brownie",level:2},{value:"Install dependencies",id:"install-dependencies",level:2},{value:"File structure",id:"file-structure",level:3},{value:"Booting your Polygon node",id:"booting-your-polygon-node",level:2},{value:"Network and Account setup",id:"network-and-account-setup",level:2},{value:"Getting Testnet MATIC",id:"getting-testnet-matic",level:2},{value:"Deploying your Smart Contract",id:"deploying-your-smart-contract",level:2},{value:"Testing the Contract",id:"testing-the-contract",level:2}],u={toc:d};function m(e){var t=e.components,l=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{title:"Content disclaimer",type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Please view the third-party content disclaimer ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/maticnetwork/matic-docs/blob/master/CONTENT_DISCLAIMER.md"},(0,i.kt)("ins",null,"here")),".")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"Python is one of the most versatile programming languages; from researchers running their test models to developers using it in heavy production environments, it has use cases in every possible technical field."),(0,i.kt)("p",null,"In this tutorial, you will learn how to use ",(0,i.kt)("a",{parentName:"p",href:"https://eth-brownie.readthedocs.io/en/latest/index.html#brownie"},"Brownie")," framework to write and deploy a smart contract by leveraging ",(0,i.kt)("a",{parentName:"p",href:"https://www.quicknode.com/chains/matic?utm_source=polygon_docs&utm_campaign=ploygon_docs_contract_guide"},"QuickNode")," testnet nodes for Polygon."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"To contact the Quicknode team, send them a message or tag them on Twitter ",(0,i.kt)("a",{parentName:"p",href:"https://twitter.com/QuickNode"},"@QuickNode"),".")),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Python3 installed"),(0,i.kt)("li",{parentName:"ul"},"A Polygon node"),(0,i.kt)("li",{parentName:"ul"},"Code editor"),(0,i.kt)("li",{parentName:"ul"},"Command line interface")),(0,i.kt)("h2",{id:"what-you-will-do"},"What you will do"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Set up Brownie"),(0,i.kt)("li",{parentName:"ol"},"Get access to Quicknode test nodes"),(0,i.kt)("li",{parentName:"ol"},"Compile and Deploy a smart contract"),(0,i.kt)("li",{parentName:"ol"},"Check the deployed contract data")),(0,i.kt)("h2",{id:"what-is-brownie"},"What is Brownie?"),(0,i.kt)("p",null,"Smart contract development is majorly dominated by JavaScript-based libraries like ",(0,i.kt)("a",{parentName:"p",href:"https://web3js.readthedocs.io/"},"web3.js"),", ",(0,i.kt)("a",{parentName:"p",href:"https://docs.ethers.io/"},"ethers.js"),", ",(0,i.kt)("a",{parentName:"p",href:"https://www.trufflesuite.com/docs/truffle/"},"Truffle"),", and ",(0,i.kt)("a",{parentName:"p",href:"https://hardhat.org/"},"Hardhat"),". Python is a versatile, highly used language and can also be used for smart contracts / Web3 development; ",(0,i.kt)("a",{parentName:"p",href:"https://web3py.readthedocs.io/en/stable/"},"web3.py")," is a compelling Python library that fulfills Web3 needs. Brownie framework is built on top of ",(0,i.kt)("inlineCode",{parentName:"p"},"web3.py"),"."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://eth-brownie.readthedocs.io/en/latest/index.html#brownie"},"Brownie")," is a Python-based framework to develop and test smart contracts. Brownie has support for both Solidity and Vyper contracts, and it even provides contract testing via ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/pytest-dev/pytest"},"pytest"),"."),(0,i.kt)("p",null,"To demonstrate the process of writing and deploying a smart contract with Brownie, we will use ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/brownie-mix"},"Brownie-mixes")," which are template projects. Specifically, we will use a ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/brownie-mix/token-mix"},"token mix"),", which is a template of the ERC-20 implementation."),(0,i.kt)("h2",{id:"install-dependencies"},"Install dependencies"),(0,i.kt)("p",null,"Brownie is built on top of python3, so we need it installed to work with Brownie. Let us check if we have python3 installed on our system. To do so, type the following in your command line tool:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"python3 -V\n")),(0,i.kt)("p",null,"This should return the version of python3 installed. If not installed, download and install it from the official ",(0,i.kt)("a",{parentName:"p",href:"https://www.python.org/downloads/"},"Python website"),"."),(0,i.kt)("p",null,"Let us make a project directory before installing Brownie, and make that project directory our current working directory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir brownieDemo\ncd brownieDemo\n")),(0,i.kt)("p",null,"Now that you have installed python3 on your system, let us install Brownie using pip, Python's package manager. Pip is similar to what npm is for JavaScript. Type the following in your command line:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pip3 install eth-brownie\n")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"If the install fails, you can use the following command instead: ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo pip3 install eth-brownie"))),(0,i.kt)("p",null,"To check if Brownie was installed correctly, type ",(0,i.kt)("inlineCode",{parentName:"p"},"brownie")," in your command line, and it should give the following output:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(39583).Z,width:"1600",height:"807"})),(0,i.kt)("p",null,"To get the token mix, simply type the following in your command line:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"brownie bake token\n")),(0,i.kt)("p",null,"This will create a new directory ",(0,i.kt)("inlineCode",{parentName:"p"},"token/")," in our ",(0,i.kt)("inlineCode",{parentName:"p"},"brownieDemo")," directory."),(0,i.kt)("h3",{id:"file-structure"},"File structure"),(0,i.kt)("p",null,"First of all, navigate to the ",(0,i.kt)("inlineCode",{parentName:"p"},"token")," directory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"cd token\n")),(0,i.kt)("p",null,"Now, open the ",(0,i.kt)("inlineCode",{parentName:"p"},"token")," directory in your text editor. Under the ",(0,i.kt)("inlineCode",{parentName:"p"},"contracts/")," folder you will find ",(0,i.kt)("inlineCode",{parentName:"p"},"Token.sol"),", which is our main contract. You can write your own contracts or modify ",(0,i.kt)("inlineCode",{parentName:"p"},"Token.sol")," file."),(0,i.kt)("p",null,"Under the ",(0,i.kt)("inlineCode",{parentName:"p"},"scripts/")," folder, you will find ",(0,i.kt)("inlineCode",{parentName:"p"},"token.py")," Python script. This script will be used to deploy the contract, and modifications are needed based on contracts."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(25393).Z,width:"1600",height:"648"})),(0,i.kt)("p",null,"The contract is an ERC-20 contract. You can learn more about the ERC-20 standards and contracts in this ",(0,i.kt)("a",{parentName:"p",href:"https://www.quicknode.com/guides/solidity/how-to-create-and-deploy-an-erc20-token"},"guide on ERC-20 tokens"),"."),(0,i.kt)("h2",{id:"booting-your-polygon-node"},"Booting your Polygon node"),(0,i.kt)("p",null,"QuickNode has a global network of Polygon Mainnet and Mumbai testnet nodes. They also run a ",(0,i.kt)("a",{parentName:"p",href:"https://docs.polygon.technology/docs/operate/network/#:~:text=https%3A//rpc%2Dmainnet.matic.quiknode.pro"},"free public Polygon RPC")," but if you get rate limited, you can sign up for a ",(0,i.kt)("a",{parentName:"p",href:"https://www.quicknode.com/chains/matic?utm_source=polygon_docs&utm_campaign=ploygon_docs_contract_guide"},"free trial node from QuickNode"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(33825).Z,width:"2560",height:"1063"})),(0,i.kt)("p",null,"Copy the ",(0,i.kt)("strong",{parentName:"p"},"HTTP URL"),", which will be useful later in the tutorial."),(0,i.kt)("h2",{id:"network-and-account-setup"},"Network and Account setup"),(0,i.kt)("p",null,"We need to set up our QuickNode endpoint with Brownie. To do so, type the following in your command line:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"brownie networks add Ethereum matic_mumbai host=YOUR_QUICKNODE_URL chainid=3\n")),(0,i.kt)("p",null,"Replace ",(0,i.kt)("inlineCode",{parentName:"p"},"YOUR_QUICKNODE_URL")," with the ",(0,i.kt)("strong",{parentName:"p"},"Mumbai Testnet HTTP URL")," that we just received while booting our Polygon node."),(0,i.kt)("p",null,"In the above command, ",(0,i.kt)("inlineCode",{parentName:"p"},"Ethereum")," is the name of the environment, and ",(0,i.kt)("inlineCode",{parentName:"p"},"matic_mumbai")," is the custom name of the network; you can give any name to your custom network."),(0,i.kt)("p",null,"The next thing we need to do here is to create a new wallet using Brownie, to do so type the following in your command line:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"brownie accounts generate testac\n")),(0,i.kt)("p",null,"You will be asked to set up a password for your account! After completing the steps, this will generate an account along with a mnemonic phrase, save it offline. The name ",(0,i.kt)("inlineCode",{parentName:"p"},"testac")," is the name for our account (You can choose any name that you like)."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(63878).Z,width:"1600",height:"793"})),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Mnemonic phrases can be used to recover an account or import the account to other ",(0,i.kt)("a",{parentName:"p",href:"https://www.quicknode.com/guides/web3-sdks/how-to-do-a-non-custodial-transaction-with-quicknode"},(0,i.kt)("ins",null,"non-custodial wallets")),". The account you see in the image above was just created for this guide.")),(0,i.kt)("p",null,"Copy the account address so that we can get some test MATIC, which will be required to deploy our contract."),(0,i.kt)("h2",{id:"getting-testnet-matic"},"Getting Testnet MATIC"),(0,i.kt)("p",null,"We will need some test MATIC tokens to pay for gas fees to deploy our smart contract."),(0,i.kt)("p",null,"Copy the address of your account which we generated in this tutorial, paste it into the address field of ",(0,i.kt)("a",{parentName:"p",href:"https://faucet.polygon.technology/"},"Polygon faucet"),", and click on ",(0,i.kt)("strong",{parentName:"p"},"Submit"),". The faucet will send you 0.2 test MATIC."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(81206).Z,width:"1600",height:"673"})),(0,i.kt)("h2",{id:"deploying-your-smart-contract"},"Deploying your Smart Contract"),(0,i.kt)("p",null,"Before deploying the contract, you need to compile it using:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"brownie compile\n")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(24355).Z,width:"1572",height:"338"})),(0,i.kt)("p",null,"Now open the ",(0,i.kt)("inlineCode",{parentName:"p"},"scripts/token.py")," in your text editor, and make the following changes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},"#!/usr/bin/python3\nfrom brownie import Token, accounts\n\ndef main():\n    acct = accounts.load('testac')\n    return Token.deploy(\"Test Token\", \"TST\", 18, 1e21, {'from': acct})\n")),(0,i.kt)("admonition",{title:"Explanation",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Using the above code, we have imported ",(0,i.kt)("inlineCode",{parentName:"p"},"testac")," account which we created earlier, and stored it in ",(0,i.kt)("inlineCode",{parentName:"p"},"acct")," variable. Also, in the next line, we have edited ",(0,i.kt)("inlineCode",{parentName:"p"},"'from':")," part to receive data from ",(0,i.kt)("inlineCode",{parentName:"p"},"acct")," variable.")),(0,i.kt)("p",null,"Finally, we will deploy our smart contract:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"brownie run token.py --network matic_mumbai\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"matic_mumbai")," is the name of the custom network which we created earlier. The prompt will ask you for the ",(0,i.kt)("strong",{parentName:"p"},"password")," that we set earlier while making the account."),(0,i.kt)("p",null,"After running the above command, you must get the transaction hash, and Brownie will wait for the transaction to get confirmed. Once the transaction is confirmed, it will return the address at which our contract is deployed on the Polygon Mumbai testnet."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(49816).Z,width:"662",height:"164"})),(0,i.kt)("p",null,"You can check out the deployed contract by copy-pasting the contract address at ",(0,i.kt)("a",{parentName:"p",href:"https://mumbai.polygonscan.com/"},"Polygonscan Mumbai"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(97571).Z,width:"1565",height:"672"})),(0,i.kt)("h2",{id:"testing-the-contract"},"Testing the Contract"),(0,i.kt)("p",null,"Brownie also offers the option of testing smart contracts functionalities. It uses the ",(0,i.kt)("inlineCode",{parentName:"p"},"pytest")," framework to easily generate unit tests. You can find more information about writing tests on Bronwnie ",(0,i.kt)("a",{parentName:"p",href:"https://eth-brownie.readthedocs.io/en/latest/tests-pytest-intro.html#"},"on their documentation"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"This is how contracts are deployed on Polygon using Brownie and QuickNode.")),(0,i.kt)("p",null,"QuickNode, just like Polygon, has always had an education-first approach providing developer ",(0,i.kt)("a",{parentName:"p",href:"https://www.quicknode.com/guides?utm_source=polygon_docs&utm_campaign=ploygon_docs_contract_guide"},"guides"),", ",(0,i.kt)("a",{parentName:"p",href:"https://www.quicknode.com/docs/polygon?utm_source=polygon_docs&utm_campaign=ploygon_docs_contract_guide"},"docs"),", ",(0,i.kt)("a",{parentName:"p",href:"https://www.youtube.com/channel/UC3lhedwc0EISreYiYtQ-Gjg/videos"},"tutorial videos")," and a ",(0,i.kt)("a",{parentName:"p",href:"https://discord.gg/DkdgEqE"},"community of Web3 developers")," who are eager to help each other."))}m.isMDXComponent=!0},39583:function(e,t,n){t.Z=n.p+"assets/images/brownie-commands-1383b1a4d0fcd5a1cb7aa737cedd7332.png"},24355:function(e,t,n){t.Z=n.p+"assets/images/brownie-compile-43ddb5caa84d75e14230f7eb543e763f.png"},49816:function(e,t,n){t.Z=n.p+"assets/images/brownie-run-cbe8b401ac32af2fc9707f3d384c581b.png"},81206:function(e,t,n){t.Z=n.p+"assets/images/faucet-83749d3db8b1b809a2e27f0684138ff5.png"},33825:function(e,t,n){t.Z=n.p+"assets/images/http_URL-876b3c6797c52a9794f5ff818c44ba49.png"},63878:function(e,t,n){t.Z=n.p+"assets/images/new-account-e05110e8bc680b2aee4634494b32025c.png"},97571:function(e,t,n){t.Z=n.p+"assets/images/polygonscan-741e360ebc5968d8636f56bdd76c0b9a.png"},25393:function(e,t,n){t.Z=n.p+"assets/images/token-sol-97d00b88bab06ac840ccd3eda4c92c4b.png"}}]);