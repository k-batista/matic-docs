"use strict";(self.webpackChunkmatic_docs=self.webpackChunkmatic_docs||[]).push([[20322],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,u=d["".concat(l,".").concat(m)]||d[m]||h[m]||r;return n?o.createElement(u,i(i({ref:t},p),{},{components:n})):o.createElement(u,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},765:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return h}});var o=n(87462),a=n(63366),r=(n(67294),n(3905)),i=["components"],s={id:"getting-started",title:"PoS Bridge",sidebar_label:"Introduction",description:"More flexibility and faster withdrawals with Polygon POS.",keywords:["docs","matic","pos bridge","deposit","withdraw","mapping","state sync"],image:"https://matic.network/banners/matic-network-16x9.png"},l=void 0,c={unversionedId:"develop/ethereum-polygon/pos/getting-started",id:"develop/ethereum-polygon/pos/getting-started",title:"PoS Bridge",description:"More flexibility and faster withdrawals with Polygon POS.",source:"@site/docs/develop/ethereum-polygon/pos/getting-started.md",sourceDirName:"develop/ethereum-polygon/pos",slug:"/develop/ethereum-polygon/pos/getting-started",permalink:"/matic-docs/docs/develop/ethereum-polygon/pos/getting-started",draft:!1,editUrl:"https://github.com/maticnetwork/matic-docs/tree/master/docs/develop/ethereum-polygon/pos/getting-started.md",tags:[],version:"current",lastUpdatedBy:"Kennedy Batista",lastUpdatedAt:1686621530,formattedLastUpdatedAt:"Jun 13, 2023",frontMatter:{id:"getting-started",title:"PoS Bridge",sidebar_label:"Introduction",description:"More flexibility and faster withdrawals with Polygon POS.",keywords:["docs","matic","pos bridge","deposit","withdraw","mapping","state sync"],image:"https://matic.network/banners/matic-network-16x9.png"}},p={},h=[{value:"Steps to use the PoS Bridge",id:"steps-to-use-the-pos-bridge",level:2},{value:"Deposit",id:"deposit",level:3},{value:"Withdrawals",id:"withdrawals",level:3}],d={toc:h};function m(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Please check the latest ",(0,r.kt)("a",{parentName:"p",href:"/matic-docs/docs/develop/ethereum-polygon/matic-js/get-started"},"Matic.js documentation on PoS")," to get started."),(0,r.kt)("p",null,"A bridge is basically a set of contracts that help in moving assets from the root chain to the child chain. There are primarily two bridges to move assets between Ethereum and Polygon. The first one is the Plasma bridge and the second one is called the ",(0,r.kt)("strong",{parentName:"p"},"PoS Bridge")," or ",(0,r.kt)("strong",{parentName:"p"},"Proof of Stake bridge"),". ",(0,r.kt)("strong",{parentName:"p"},"Plasma bridge")," provides an increased security guarantee due to the Plasma exit mechanism."),(0,r.kt)("p",null,"However, there are certain restrictions on the child token and there is a 7-day withdrawal period associated with all exits/withdraws from Polygon to Ethereum on the Plasma bridge."),(0,r.kt)("p",null,"This is quite painful for those DApps/users who need some ",(0,r.kt)("strong",{parentName:"p"},"flexibility")," and ",(0,r.kt)("strong",{parentName:"p"},"faster withdrawals"),", and are happy with the level of security provided by the Polygon Proof-of-Stake bridge, secured by a robust set of external validators."),(0,r.kt)("p",null,"Proof of stake based assets provides PoS security and faster exit with one checkpoint interval."),(0,r.kt)("h2",{id:"steps-to-use-the-pos-bridge"},"Steps to use the PoS Bridge"),(0,r.kt)("p",null,"Before we enter into this section of the docs, it may help to have a thorough understanding of some terms as you'll interact with them while trying to use the bridge: ",(0,r.kt)("a",{parentName:"p",href:"https://docs.polygon.technology/docs/develop/ethereum-polygon/submit-mapping-request/"},"Mapping")," and the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.polygon.technology/docs/pos/state-sync/state-sync/"},"State Sync Mechanism"),"."),(0,r.kt)("p",null,"Then, the first step to using the PoS bridge is mapping the ",(0,r.kt)("strong",{parentName:"p"},"Root Token")," and ",(0,r.kt)("strong",{parentName:"p"},"Child Token"),". It means that the token contract on the root chain and the token contract on the child chain have to maintain a connection (called mapping) to transfer assets between themselves. If you're interested in submitting a mapping request, please do that using ",(0,r.kt)("a",{parentName:"p",href:"/docs/develop/ethereum-polygon/submit-mapping-request/"},"this guide"),"."),(0,r.kt)("p",null,"At a lower level and with more detail, this is what happens:"),(0,r.kt)("h3",{id:"deposit"},"Deposit"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Owner of the asset ",(0,r.kt)("strong",{parentName:"li"},"(ERC20/ERC721/ERC1155)")," token has to approve a specific contract on the PoS bridge to spend the amount of tokens to be transferred. This specific contract is called the ",(0,r.kt)("strong",{parentName:"li"},"Predicate Contract")," (deployed on the Ethereum network) which actually ",(0,r.kt)("strong",{parentName:"li"},"locks the amount of tokens to be deposited"),"."),(0,r.kt)("li",{parentName:"ol"},"Once the approval is given, the next step is to ",(0,r.kt)("strong",{parentName:"li"},"deposit the asset"),". A function call has to be made on the ",(0,r.kt)("inlineCode",{parentName:"li"},"RootChainManager")," contract which in turn triggers the ",(0,r.kt)("inlineCode",{parentName:"li"},"ChildChainManager")," contract on the Polygon chain."),(0,r.kt)("li",{parentName:"ol"},"This happens through a state sync mechanism which can be understood in detail from ",(0,r.kt)("a",{parentName:"li",href:"/docs/pos/state-sync/state-sync/"},"here"),"."),(0,r.kt)("li",{parentName:"ol"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"ChildChainManager")," internally calls the ",(0,r.kt)("inlineCode",{parentName:"li"},"deposit")," function of the child token contract and the corresponding amount of asset tokens are ",(0,r.kt)("strong",{parentName:"li"},"minted to the user's account"),". It is important to note that only the ",(0,r.kt)("inlineCode",{parentName:"li"},"ChildChainManager")," can access the ",(0,r.kt)("inlineCode",{parentName:"li"},"deposit")," function on the child token contract."),(0,r.kt)("li",{parentName:"ol"},"Once the user gets the tokens, they can be ",(0,r.kt)("strong",{parentName:"li"},"transfered almost instantly with negligible fees on the Polygon chain"),".")),(0,r.kt)("h3",{id:"withdrawals"},"Withdrawals"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Withdrawing assets back to Ethereum is a 2-step process in which the asset token has to be ",(0,r.kt)("strong",{parentName:"li"},"first burnt on the Polygon chain")," and then the ",(0,r.kt)("strong",{parentName:"li"},"proof of this burn transaction has to be submitted")," on the Ethereum chain."),(0,r.kt)("li",{parentName:"ol"},"It takes about 20 mins to 3 hours for the burn transaction to be checkpointed into the Ethereum chain. This is done by the Proof of Stake validators."),(0,r.kt)("li",{parentName:"ol"},"Once the transaction has been added to the checkpoint, proof of the burn transaction can be submitted on the ",(0,r.kt)("inlineCode",{parentName:"li"},"RootChainManager")," contract on Ethereum by calling the ",(0,r.kt)("inlineCode",{parentName:"li"},"exit")," function."),(0,r.kt)("li",{parentName:"ol"},"This function call ",(0,r.kt)("strong",{parentName:"li"},"verifies the checkpoint inclusion")," and then triggers the Predicate contract which had locked the asset tokens when the assets were deposited initially."),(0,r.kt)("li",{parentName:"ol"},"As the final step, the ",(0,r.kt)("strong",{parentName:"li"},"predicate contract releases the locked tokens")," and refunds them to the users account on Ethereum.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Once mapping is done, you can either use the ",(0,r.kt)("strong",{parentName:"p"},"matic.js SDK")," to interact with the contracts or you can do the same without the SDK. However, the matic.js SDK is designed in a very user friendly way to make the asset transfer mechanism very easy to integrate with any application.")))}m.isMDXComponent=!0}}]);